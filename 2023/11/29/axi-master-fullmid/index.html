<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>axi(full)master(中) | 冰蒂斯のformula</title><meta name="author" content="冰蒂斯"><meta name="copyright" content="冰蒂斯"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1. W addr checking1.1 重要前言这部分的代码量虽然不是很大，但由于没有很好的注释帮助，读者很难弄清楚这些信号的目的，以及信号之间相互的关系。在开始阅读代码之前需要注意下面几点：  该仿真的 OPT_MAXBURST&#x3D;&#x3D; 0 ； 该代码需要结合仿真波形一起查看，方便理解行为逻辑；  1.2 Get initial signal the FORMAL needa">
<meta property="og:type" content="article">
<meta property="og:title" content="axi(full)master(中)">
<meta property="og:url" content="http://more_study@163.com/2023/11/29/axi-master-fullmid/index.html">
<meta property="og:site_name" content="冰蒂斯のformula">
<meta property="og:description" content="1. W addr checking1.1 重要前言这部分的代码量虽然不是很大，但由于没有很好的注释帮助，读者很难弄清楚这些信号的目的，以及信号之间相互的关系。在开始阅读代码之前需要注意下面几点：  该仿真的 OPT_MAXBURST&#x3D;&#x3D; 0 ； 该代码需要结合仿真波形一起查看，方便理解行为逻辑；  1.2 Get initial signal the FORMAL needa">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://more_study@163.com/img/chainsaw_makima04.jpg">
<meta property="article:published_time" content="2023-11-29T09:54:28.000Z">
<meta property="article:modified_time" content="2023-12-02T15:20:03.773Z">
<meta property="article:author" content="冰蒂斯">
<meta property="article:tag" content="AXI">
<meta property="article:tag" content="master">
<meta property="article:tag" content="property">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://more_study@163.com/img/chainsaw_makima04.jpg"><link rel="shortcut icon" href="/img/bloodborn_lib.png"><link rel="canonical" href="http://more_study@163.com/2023/11/29/axi-master-fullmid/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'axi(full)master(中)',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-12-02 23:20:03'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.0.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/head.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/reze.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="冰蒂斯のformula"><span class="site-name">冰蒂斯のformula</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">axi(full)master(中)</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-11-29T09:54:28.000Z" title="发表于 2023-11-29 17:54:28">2023-11-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-12-02T15:20:03.773Z" title="更新于 2023-12-02 23:20:03">2023-12-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/AXI/">AXI</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/AXI/property/">property</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="axi(full)master(中)"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-W-addr-checking"><a href="#1-W-addr-checking" class="headerlink" title="1. W addr checking"></a>1. W addr checking</h1><h2 id="1-1-重要前言"><a href="#1-1-重要前言" class="headerlink" title="1.1 重要前言"></a>1.1 重要前言</h2><p>这部分的代码量虽然不是很大，但由于没有很好的注释帮助，读者很难弄清楚这些信号的目的，以及信号之间相互的关系。在开始阅读代码之前需要注意下面几点：</p>
<ul>
<li>该仿真的 <em>OPT_MAXBURST&#x3D;&#x3D; 0</em> ；</li>
<li>该代码需要结合仿真波形一起查看，方便理解行为逻辑；</li>
</ul>
<h2 id="1-2-Get-initial-signal-the-FORMAL-need"><a href="#1-2-Get-initial-signal-the-FORMAL-need" class="headerlink" title="1.2 Get initial signal the FORMAL need"></a>1.2 Get initial signal the FORMAL need</h2><p><em>axi-lite</em> 协议不支持 <em>outstanding</em> 能力，所以每次的握手都是数据的传递，传输的数据是一个写地址、写数据。在<em>axi protocol</em> 中握手并不意味着数据的传递<font color="red">???????????????</font></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">initial</span>	f_axi_wr_len = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// formal 验证中需要用到 AW cahnnel 的 len 信息，对其进行一个数据 copy</span></span><br><span class="line"><span class="comment">// 在不同的时间段或者设置下，设置为不同的数值。</span></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">if</span> (axi_awr_req)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">		f_axi_wr_burst &lt;= i_axi_awburst;<span class="comment">// burst type</span></span><br><span class="line">		f_axi_wr_size  &lt;= i_axi_awsize;	<span class="comment">// transfer size</span></span><br><span class="line">		f_axi_wr_len   &lt;= i_axi_awlen;	<span class="comment">// burst length</span></span><br><span class="line">		f_axi_wr_lockd &lt;= i_axi_awlock; <span class="comment">// if lock ot not</span></span><br><span class="line">		<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>如果模块不允许 <em>narrow transfer</em>，需要对 <em>write_size</em> 参数做更改。<em>size</em> 大小即等于数据位宽的大小. 作用只是简单的简化 <em>formal</em> 中的<em>size</em> 计算相关逻辑。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// f_axi_wr_size maximums 		</span></span><br><span class="line"><span class="comment">// &#123;&#123;&#123; 		</span></span><br><span class="line"><span class="keyword">if</span> (!OPT_NARROW_BURST) 		<span class="comment">// 如果OPT_NARROW_BURST为假</span></span><br><span class="line"><span class="keyword">begin</span> 			</span><br><span class="line">    <span class="comment">// 在这种情况下，所有的大小参数都是固定的。</span></span><br><span class="line">    <span class="comment">// 为了优化目的，我们从求解器的逻辑选择中移除它们</span></span><br><span class="line">    <span class="keyword">if</span> (DW == <span class="number">8</span>) 				<span class="comment">// 如果数据宽度（DW）等于8</span></span><br><span class="line">        f_axi_wr_size &lt;= <span class="number">0</span>; 	<span class="comment">// 设置f_axi_wr_size为0</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (DW == <span class="number">16</span>) 		<span class="comment">// 如果DW等于16</span></span><br><span class="line">        f_axi_wr_size &lt;= <span class="number">1</span>; 	<span class="comment">// 设置f_axi_wr_size为1</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (DW == <span class="number">32</span>) 		<span class="comment">// 如果DW等于32</span></span><br><span class="line">        f_axi_wr_size &lt;= <span class="number">2</span>; 	<span class="comment">// 设置f_axi_wr_size为2</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (DW == <span class="number">64</span>) 		<span class="comment">// 如果DW等于64</span></span><br><span class="line">        f_axi_wr_size &lt;= <span class="number">3</span>; 	<span class="comment">// 设置f_axi_wr_size为3</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (DW == <span class="number">128</span>) 		<span class="comment">// 如果DW等于128</span></span><br><span class="line">        f_axi_wr_size &lt;= <span class="number">4</span>; 	<span class="comment">// 设置f_axi_wr_size为4</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (DW == <span class="number">256</span>) 		<span class="comment">// 如果DW等于256</span></span><br><span class="line">        f_axi_wr_size &lt;= <span class="number">5</span>; 	<span class="comment">// 设置f_axi_wr_size为5</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (DW == <span class="number">512</span>) 		<span class="comment">// 如果DW等于512</span></span><br><span class="line">        f_axi_wr_size &lt;= <span class="number">6</span>; 	<span class="comment">// 设置f_axi_wr_size为6</span></span><br><span class="line">    <span class="keyword">else</span> <span class="comment">// if (DW == 1024) 	// 如果DW等于1024或者其他值</span></span><br><span class="line">        f_axi_wr_size &lt;= <span class="number">7</span>; 	<span class="comment">// 设置f_axi_wr_size为7</span></span><br><span class="line"><span class="keyword">end</span> 		</span><br><span class="line"><span class="comment">// &#125;&#125;&#125; 	</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>



<h2 id="1-3-choose-SIZ———-waiting"><a href="#1-3-choose-SIZ———-waiting" class="headerlink" title="1.3 choose  SIZ———-waiting"></a>1.3 choose  SIZ———-waiting</h2><p>在后续的使用 <em>formal property</em> 的过程中会使用到 <em>aw_size</em> 的数据，这个数据会根据参数选择，在 <code>f_axi_wr_size</code>、 <code>i_axi_awsize</code>中进行选择。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">always</span> @(*)</span><br><span class="line">	this_awsize = (f_axi_wr_pending&gt;<span class="number">0</span>) ? f_axi_wr_size : i_axi_awsize;</span><br></pre></td></tr></table></figure>

<p>别急，先翻译一下这段代码表达的行为：<font color="red">如果<em>f_axi_wr_pending</em> 不是空，代表上一个 <em>burst</em> 正在发生。需要使用 <em>the size of the last  burst instead of the incoming burst</em></font>.之前作者也说过下面这句话。</p>
<blockquote>
<p><font color="red">while <strong>waiting</strong> for the write data, <strong>NO OTHER WRITE ADDRESS may be permitted</strong>. </font></p>
</blockquote>
<p><font color="red">这里还有更多值得注意的事情，尤其是 pending 的相关计算，代表的意思，后续将重新回到这里</font></p>
<h2 id="1-4-next-address"><a href="#1-4-next-address" class="headerlink" title="1.4 next address"></a>1.4 next address</h2><p>此处使用了一个计算 <em>next_address</em> 的 <em>property</em>名字是 <code>faxi_addr</code>。该 <em>property</em> 通过四个输入信号数据： <code>i_last_addr</code>, <code>i_size</code> , <code>i_burst</code> , <code>i_len</code> 计算出下一个地址 <code>next_addr</code>。详细内容可以参考：<a target="_blank" rel="noopener" href="http://xlxwzybds.cn/2023/11/26/formal-addr/">formal_addr | 冰蒂斯の博客 (xlxwzybds.cn)</a>。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">faxi_addr <span class="variable">#(.AW(AW))</span></span><br><span class="line">get_next_waddr(</span><br><span class="line">	<span class="comment">// axi-lite ：</span></span><br><span class="line">	(f_axi_wr_pending&gt;<span class="number">1</span>) ? f_axi_wr_addr  : i_axi_awaddr,</span><br><span class="line">       <span class="comment">//(f_axi_wr_pending&gt;0) ? f_axi_wr_size : i_axi_awsize;</span></span><br><span class="line">	this_awsize,</span><br><span class="line">	(f_axi_wr_pending&gt;<span class="number">1</span>) ? f_axi_wr_burst: i_axi_awburst,</span><br><span class="line">	(f_axi_wr_pending&gt;<span class="number">1</span>) ? f_axi_wr_len  : i_axi_awlen,</span><br><span class="line"></span><br><span class="line">     	f_axi_wr_incr, 		<span class="comment">// the increment of address</span></span><br><span class="line">     	next_wr_addr		<span class="comment">// the next address</span></span><br><span class="line">	<span class="comment">// </span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<blockquote>
<p><em>Situation1</em>:  <code>f_axi_wr_pending&lt;=1</code> , which means <strong>axi-lite transfer</strong> or one  beat transfer of axi-full , and <strong>this clock is the last beat</strong> of the last burst.</p>
</blockquote>
<p>在 <em>axi-lite</em> 中  <em>f_axi_wr_pending</em>  的大小保持位 <code>0</code>，所有的需要 <code>(f_axi_wr_pending&gt;1) </code>选择的参数，都选择后者。在代码的后半部分，我可以看见 <code>generate if(!F_OPT_BURSTS)</code>的有关选项，可以看见如下代码：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">generate</span> <span class="keyword">if</span> (!F_OPT_BURSTS)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">         <span class="keyword">assert</span>(f_axi_wr_pending &lt;= <span class="number">1</span>);  <span class="comment">// only one beat in burst</span></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">         <span class="keyword">assert</span>(f_axi_wr_len == <span class="number">0</span>);    <span class="comment">// one byte in one beat</span></span><br></pre></td></tr></table></figure>

<p>对于<em>axi-lite</em> 协议，上面的代码可以更新为：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">faxi_addr <span class="variable">#(.AW(AW))</span></span><br><span class="line">get_next_waddr(</span><br><span class="line">	i_axi_awaddr,</span><br><span class="line">       <span class="comment">//(f_axi_wr_pending&gt;0) ? f_axi_wr_size : i_axi_awsize;</span></span><br><span class="line">	this_awsize,		</span><br><span class="line">       i_axi_awburst,		i_axi_awlen,</span><br><span class="line">     	f_axi_wr_incr, 		next_wr_addr		</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<blockquote>
<p><em>Situation2</em>:  <code>f_axi_wr_pending &gt; 1</code> , which means the transaction is  an axi-full burst , there are still some data should be transfered in the last burst , the <strong>AW chennel information</strong> (etc, awaddr , awsize,burst type , awlen ) should keep stable , not change.</p>
</blockquote>
<p>如果硬件仍处在一个<em>burst</em>过程中，代码应该保持为：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">faxi_addr <span class="variable">#(.AW(AW))</span></span><br><span class="line">get_next_waddr(</span><br><span class="line">     <span class="comment">// all f_axi_wr_* signals will keep in one burst , except that the </span></span><br><span class="line">     <span class="comment">// pending in last burst at this clock is equal to 1.</span></span><br><span class="line">	f_axi_wr_addr,</span><br><span class="line">	this_awsize,</span><br><span class="line">	f_axi_wr_burst,		f_axi_wr_len,</span><br><span class="line">	f_axi_wr_incr, 		next_wr_addr</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h2 id="1-5-f-axi-wr-addr"><a href="#1-5-f-axi-wr-addr" class="headerlink" title="1.5  f_axi_wr_addr"></a>1.5  f_axi_wr_addr</h2><blockquote>
<p><strong>Name</strong>：<code>f_axi_wr_addr </code></p>
<p><strong>Purpose</strong>:  用于存储 <em>formal verificate</em> 计算的地址 <em>address</em></p>
<p><strong>Description</strong>：在 <em>faxi_master formal property</em> 代码文件中需要使用两个关于 <em>addr</em> 的计算<em>property</em> ：  <code>faxi_addr</code>、 <code>faxi_valaddr</code>。在使用过程中会涉及到三个和地址有关的信号，他们分别是：</p>
<ul>
<li>输入地址信号 <code>i_axi_awaddr</code></li>
<li><em>faxi_addr</em> 计算出来的下一个地址信号 <code>next_wr_addr</code></li>
<li>寄存的地址信号(类似于<em>skidbuffer‘</em>) <code>r_axi_wr_addr</code></li>
</ul>
<p><strong>Attention</strong>：这里的信号使用很复杂，如果想通过看波形图来知晓信号作用十分麻烦。如果不是我突然想到 <code>skidbuffer</code>，可能对这些信息几天都没有头绪。在后续的过程中，一定要及时回顾之前的信息，举一反三！（为什么要求举一反三，因为注释不够全）</p>
</blockquote>
<h3 id="1-register-axi-wr-addr"><a href="#1-register-axi-wr-addr" class="headerlink" title="1.register_axi_wr_addr"></a>1.register_axi_wr_addr</h3><p>这部分我纠结了好久不知道是什么意思，突然发现这个信号的实现方式，和 <code>skidbuffer</code>有异曲同工之妙！我将信号的名字 <code>r_axi_wr_addr</code>作更改后为 <code>register_axi_wr_addr</code>当作本小结的标题。</p>
<blockquote>
<p> 首先简单回顾 <code>skidbuffer</code>。如果 <em>valid</em> 信号有效，但是 <em>ready</em> 信号还没有没有 <em>backpressure</em> (still assert ready signal) ， 需要先把 <em>valid</em> 寄存到 <em>r_valid</em> 寄存器中，后续根据情况判断 <em>o_valid</em> 来自于 <em>i_valid</em> 或者 <em>r_valid</em>。</p>
</blockquote>
<p>可以将 <em>i_axi_awaddr</em> 看作 <em>i_valid</em> ， <em>r_axi_wr_addr</em> 看作 <em>r_valid</em> ， 将 <em>f_axi_wr_addr</em>看作<em>o_valid</em> 。 只不过这里的 <em>r_valid</em> 会有两个信号源分别是 <code>i_valid</code>， <code>next_valid</code>(指的是 <em>next_wr_addr</em> )</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// r_axi_wr_addr</span></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">     <span class="comment">// axi_awr_req == 1 ,means :</span></span><br><span class="line">     <span class="comment">//	AW channel handshake happend , a new address for </span></span><br><span class="line">     <span class="comment">//    a new burst is already </span></span><br><span class="line"><span class="keyword">if</span> (axi_awr_req &amp;&amp; ((f_axi_wr_pending &gt; <span class="number">0</span>)||(!axi_wr_req)))</span><br><span class="line">     <span class="comment">// pending &gt; 0 ,means that:</span></span><br><span class="line">     <span class="comment">//	the last burst is still transfering , </span></span><br><span class="line">     <span class="comment">//	having one beat to transfered at least.</span></span><br><span class="line">     <span class="comment">// !wr_req == 0 , means that:</span></span><br><span class="line">     <span class="comment">//	no w_channel handshake happends , the new_input_addr</span></span><br><span class="line">     <span class="comment">//	does not be used at once.</span></span><br><span class="line">     </span><br><span class="line">     	<span class="comment">// then , the new_input_addr should be registered in </span></span><br><span class="line">     	<span class="comment">// r_axi_wr_addr temperately.</span></span><br><span class="line">	r_axi_wr_addr &lt;= i_axi_awaddr;</span><br><span class="line"></span><br><span class="line"><span class="comment">// the second if is not easy to understand</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (axi_awr_req || axi_wr_req) <span class="comment">// &amp;&amp; first axi_wr_req</span></span><br><span class="line">	r_axi_wr_addr &lt;= next_wr_addr;</span><br></pre></td></tr></table></figure>

<p><code>(f_axi_wr_pending &gt; 0)||(!axi_wr_req)</code>的逆是什么？ 可以写成下面新的表达形式方便理解—— <code>!((pending == 0)&amp;&amp; wr_req)</code>。现在可以分类讨论上面的 <code>if</code>情况。</p>
<ul>
<li>首先是第一个 <code>if</code>分支发生条件：<ul>
<li><code>axi_awr_req == 1</code>，完成 <em>AW channel</em> 的 <em>handshake</em>。</li>
<li>只需要有一个正在进行的<em>burst (etc , pending&gt;0)</em> ，或者 <em>W channel</em> 无法<em>handshake</em>；</li>
</ul>
</li>
<li>第二个分支 <code>if</code>发生：（需要考虑什么情况第一种 <em>if</em> 不发生）<ul>
<li><code>axi_awr_req== 0 </code>导致第一种失败。</li>
<li>此时 <code>axi_wr_req ==1 </code>意味着发生了 <em>w_data handshake</em> ，有数据在 <em>W cahnnel</em> 进行传输；</li>
<li><em>NO handshake in AW channel ， but have data to transfer ， means the last burst is happending . The number of pending must great than zero</em>. So <code>f_axi_wr_pending &gt; 0</code>;</li>
<li><code>!((pending == 0) &amp;&amp; wr_req  )</code>导致第一种情况失效。<ul>
<li><em>NO last burst happend</em> ： <code>(pending == 0)</code>；</li>
<li><em>handshake in W channel</em> ： <code>axi_wr_req ==1</code>；</li>
<li><em>pending &#x3D;&#x3D; 0</em> 同时还要求 <em>w channel</em> 完成握手，如果没有一个 <em>burst address</em> 有效握手，那么根本不可能，所以必须  <code>axi_awr_req ==1</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>所以根据上面的推理，理清楚下面的几种情况：</p>
<blockquote>
<p><strong>Situation1.1</strong>:  AW handshake , W handshake , pending no zero . 这种情况来了<strong>新的</strong> <em>burst addr</em> ， 但是上一个 <em>the last burst</em> <strong>仍然在传输数据</strong>。所以<strong>寄存</strong> <em>burst addr</em></p>
<p><strong>Situation1.2</strong>:  AW handshake , W no handshake , pending no zero . 这种情况来了<strong>新的</strong> <em>burst addr</em> ， 但是上一个 <em>the last burst</em> <strong>仍然在传输数据</strong>。所以<strong>寄存</strong>  <em>burst addr</em></p>
<p><strong>Situation1.3</strong>:  AW handshake , W no handshake , pending is zero . 这种情况来了<strong>新的</strong> <em>burst addr</em> ， 但是上一个 <em>the last burst</em> <strong>已经结束</strong>。不过没有 <em>W channel</em> 上的数据传输，所以<strong>寄存</strong> <em>burst addr</em></p>
<p>上面是第一种行为模式，下面阐述第二种行为模式。</p>
<p><strong>Situation2.1</strong>:  AW <strong>no</strong> handshake , <strong>W  handshake , pending no zero</strong> . 这种情况<strong>没有</strong>新的 <em>burst addr</em> ， 但是上一个 <em>the last burst</em> 仍然在传输数据。所以使用计算出来的 <em>next addr</em></p>
<p><strong>Situation2.2</strong> :  AW  handshake , <strong>W  handshake , pending is zero</strong> . 这种情况<strong>没有</strong>新的 <em>burst addr</em> ， 但是上一个 <em>the last burst</em>  已经<strong>结束</strong>。所以使用计算出来的 <em>next addr</em>  。 </p>
</blockquote>
<h3 id="2-get-f-addr"><a href="#2-get-f-addr" class="headerlink" title="2. get  f_addr"></a>2. get  f_addr</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// f_axi_wr_addr</span></span><br><span class="line"><span class="keyword">always</span> @(*)</span><br><span class="line"><span class="keyword">if</span> (f_axi_wr_pending &gt; <span class="number">0</span>)</span><br><span class="line">	f_axi_wr_addr = r_axi_wr_addr;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	f_axi_wr_addr = i_axi_awaddr;</span><br></pre></td></tr></table></figure>

<p>实现的逻辑功能如下：</p>
<ul>
<li><em>the last burst has still data to be transfered （etc, f_axi_wr_pending &gt; 0）</em> 中间<em>formal property</em>计算需要的 <code>f_axi_wr_addr</code>地址来源于寄存器地址信号 <code>r_axi_wr_addr</code>。</li>
<li><em>if no burst happends , the formal_calculate_addr should use the input_aw_addr directly without delay.</em></li>
</ul>
<h1 id="2-W-channel-validate"><a href="#2-W-channel-validate" class="headerlink" title="2.W channel validate"></a>2.W channel validate</h1><p><strong>重要前言</strong>：</p>
<p>​	在 <em>axi</em> 协议中，接受到 <em>valid</em> 信息表示相关的 <em>data</em> 有效。但是是否真的有效需要进一步验证，不能对方说什么就是什么。在 <em>AW chennel</em>中 <em>awvalid</em> 有效代表两个重要的信号有效： <em>aw_address</em> &amp; <em>aw_strobe</em> 。在本小结中将使用我们的方法，<strong>再次验证</strong>是否有效；</p>
<h2 id="2-1-wraddr-validate"><a href="#2-1-wraddr-validate" class="headerlink" title="2.1 wraddr_validate"></a>2.1 wraddr_validate</h2><blockquote>
<p><em><strong>Name</strong></em>：<code>faxi_valaddr</code> —— <code>f_wraddr_validate</code></p>
<p><strong>Purpose</strong>:  使用<em>axi</em> 协议检查即将到来的地址信号(the incoming address)是否有效；</p>
<p><strong>Description</strong>：在 AW channel 中，awvalid asserted 表示 awaddress valid。但是不能收到valid信号就真的表示地址有效，还需要使用<em>formal property</em> 进一步验证。具体的内部使用信息见：<a target="_blank" rel="noopener" href="http://xlxwzybds.cn/2023/11/26/formal-valaddr/">formal_valaddr | 冰蒂斯の (xlxwzybds.cn)</a>      </p>
<p><strong>Attention</strong>：<font color="red">再次强调这里虽然使用的 <em>axifull property</em>，但是实际上实现的是 <em>axi-lite</em>。</font>因为<em>axi-lite</em>协议并没有 <em>burst</em> 能力，所以在参数的选择上，应该 <code>set 0</code>。 <em>NARROW_BURST</em> 实际上只是允许 <em>narrow transfer</em> 的能力，和 <em>burst</em> 关系不大。</p>
</blockquote>
<p>传入的参数部分是：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">.OPT_MAXBURST</span>(<span class="number">0</span>),</span><br><span class="line"><span class="variable">.OPT_EXCLUSIVE</span>(<span class="number">0</span>),</span><br><span class="line"><span class="variable">.OPT_NARROW_BURST</span>(<span class="number">1</span>),</span><br></pre></td></tr></table></figure>

<p>模块 <em>interface</em>代码：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">wire</span>	valid_iwaddr;	<span class="comment">// Incoming write address</span></span><br><span class="line"></span><br><span class="line">faxi_valaddr #(</span><br><span class="line">	<span class="variable">.C_AXI_DATA_WIDTH</span>(DW), <span class="variable">.C_AXI_ADDR_WIDTH</span>(AW),</span><br><span class="line">	<span class="variable">.OPT_MAXBURST</span>(OPT_MAXBURST),</span><br><span class="line">	<span class="variable">.OPT_EXCLUSIVE</span>(OPT_EXCLUSIVE),</span><br><span class="line">	<span class="variable">.OPT_NARROW_BURST</span>(OPT_NARROW_BURST)</span><br><span class="line">) f_wraddr_validate(</span><br><span class="line">		i_axi_awaddr,  i_axi_awlen,  i_axi_awsize,</span><br><span class="line">		i_axi_awburst, i_axi_awlock,</span><br><span class="line">		<span class="number">1&#x27;b1</span>, </span><br><span class="line">		awr_aligned,	valid_iwaddr</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li>参数  <code>F_OPT_INITIAL==1</code>代表这我们自己设置了一个 <em>initila station</em> ，而不是直接在开始时进行 <em>reset</em> 。就好比芯片温度仿真一样，或者模拟电路仿真一样，我们需要先给他一个 <em>DC</em> 直流信号，让其达到稳定值再进行后续的仿真，而不是每次一来都使用<em>initial</em>温度或者直流分量进行仿真。 如果参数 <code>F_OPT_INITIAL==0</code>，表示没有设置初始状态，那么此时 <em>initial will be reset</em> 。</li>
<li>当参数 <code>f_past_valid == 1</code>的时候，表示此时不是初始的 <em>initial reset clock</em>。此时 <em>assert  i_axi_awvalid</em>表示<em>aw channel</em>相关数据有效。将会使用 <code>faxi_valaddr</code>模块检查是否真的有效</li>
</ul>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">always</span> @(*)</span><br><span class="line"><span class="keyword">if</span> (i_axi_awvalid &amp;&amp; (f_past_valid || F_OPT_INITIAL))</span><br><span class="line">	`SLAVE_ASSUME(valid_iwaddr);</span><br><span class="line">	<span class="comment">//assert (valid_iwaddr);</span></span><br><span class="line"><span class="comment">// &#125;&#125;&#125;</span></span><br></pre></td></tr></table></figure>



<h2 id="2-2-wstrb-validate"><a href="#2-2-wstrb-validate" class="headerlink" title="2.2 wstrb_validate"></a>2.2 wstrb_validate</h2><blockquote>
<p><strong>Name</strong>：<code>wstrb_validate</code> —— <code>faxi_wstrb</code></p>
<p><strong>Purpose</strong>:  使用<em>axi</em> 协议检查数据信号(the incoming data strobe mask)是否有效；</p>
<p><strong>Description</strong>：在 W channel 中，wvalid asserted 表示 w_data valid。但是不能收到valid信号就真的表示数据有效，还需要使用 <em>formal property</em> 进一步验证。具体的内部使用信息见：<a target="_blank" rel="noopener" href="http://xlxwzybds.cn/2023/11/27/formal-wstrb/">formal_wstrb | 冰蒂斯の (xlxwzybds.cn)</a>。</p>
<p><strong>Attention</strong>：代码中使用到了 <em>byte_strb_mask</em> 和 <em>word_mask</em> 的联合。</p>
</blockquote>
<p>相关的解释在 <code>2.1</code>中已经很清楚了。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Write strobe validity checking</span></span><br><span class="line"><span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line"><span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="comment">// Verilator lint_off WIDTH</span></span><br><span class="line">	wstb_addr = f_axi_wr_addr;</span><br><span class="line">	<span class="comment">// Verilator lint_on  WIDTH</span></span><br><span class="line"></span><br><span class="line">faxi_wstrb <span class="variable">#(.C_AXI_DATA_WIDTH(DW))</span></span><br><span class="line">	f_wstrbck (wstb_addr, this_awsize, i_axi_wstrb, wstb_valid);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Insist the only the appropriate bits be valid</span></span><br><span class="line"><span class="comment">// For example, if the lower address bit is one, then the</span></span><br><span class="line"><span class="comment">// strobe LSB cannot be 1, but must be zero.  This is just</span></span><br><span class="line"><span class="comment">// enforcing the rules of the sub-address which must match</span></span><br><span class="line"><span class="comment">// the write strobe.  An STRB of 0 is always allowed.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">always</span> @(*)</span><br><span class="line"><span class="keyword">if</span> (i_axi_wvalid &amp;&amp; (f_past_valid || F_OPT_INITIAL))</span><br><span class="line">	`SLAVE_ASSUME(wstb_valid);</span><br><span class="line">	<span class="comment">//assert (wstb_valid);</span></span><br></pre></td></tr></table></figure>





<h1 id="3-write-induction-property"><a href="#3-write-induction-property" class="headerlink" title="3. write induction property"></a>3. write induction property</h1><blockquote>
<p>These are actual <code>assert()s</code> and not <code>SLAVE_ASSERT</code> or <code>SLAVE_ASSUMEs</code> because they are testing the functionality of this core and its local logical registers, not so much the functionality of the core we are testing.  这句话只是告诉：我们会使用这个模块检验自己的core性能，并不是外面的信号，所以需要<em>assert</em>而不是<em>assume</em>。</p>
</blockquote>
<p>注意我的目标是：<font color="red">通过使用 formal property 来学习其中的时序逻辑以及约束，而不是学习验证的语言。</font></p>
<h2 id="3-1-wraddr-valpending"><a href="#3-1-wraddr-valpending" class="headerlink" title="3.1 wraddr  valpending"></a>3.1 wraddr  valpending</h2><blockquote>
<p><em>If</em> <em>MAXBURST &gt; 0</em> , <em>there will be many other data beats should be transfered</em> . </p>
</blockquote>
<p>在检查了初始 <em>initial</em> 状态<em>address</em>. 也需要考虑后续的 <em>data beat</em> 是否对齐。举一个例子，如果我给出一个 <em>i_addr</em> 、<em>len</em> 、<em>size</em> 等信息确定一个 <em>burst</em> ，我确定他的初始状态下 <em>data align with addr</em>，在传输了一次 <em>beat</em> 之后，将剩余的信息当作一个新的 <em>burst</em> 来确定是否对齐。代码如下：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">always</span> @(*)</span><br><span class="line">	val_wr_len = f_axi_wr_pending[<span class="number">7</span>:<span class="number">0</span>]-<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">faxi_valaddr #(</span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="variable">.C_AXI_DATA_WIDTH</span>(DW), </span><br><span class="line">	<span class="variable">.C_AXI_ADDR_WIDTH</span>(AW),</span><br><span class="line">	<span class="variable">.OPT_MAXBURST</span>(OPT_MAXBURST),</span><br><span class="line">	<span class="variable">.OPT_EXCLUSIVE</span>(OPT_EXCLUSIVE),</span><br><span class="line">	<span class="variable">.OPT_NARROW_BURST</span>(OPT_NARROW_BURST)</span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">) f_wraddr_valpending(</span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="variable">.i_addr</span>(f_axi_wr_addr), </span><br><span class="line">	<span class="variable">.i_len</span>(val_wr_len),</span><br><span class="line">	<span class="variable">.i_size</span>(f_axi_wr_size),</span><br><span class="line">	<span class="variable">.i_burst</span>(f_axi_wr_burst), </span><br><span class="line">	<span class="variable">.i_lock</span>(f_axi_wr_lockd),</span><br><span class="line">	<span class="variable">.i_initial</span>(((f_axi_wr_pending &lt; f_axi_wr_len+<span class="number">1</span>)? <span class="number">1&#x27;b0</span>:<span class="number">1&#x27;b1</span>)),</span><br><span class="line">	<span class="variable">.o_aligned</span>(wr_aligned), </span><br><span class="line">	<span class="variable">.o_valid</span>(valid_pwaddr)</span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h2 id="3-2-check-length-of-burst"><a href="#3-2-check-length-of-burst" class="headerlink" title="3.2 check length of  burst"></a>3.2 check length of  burst</h2><p><code>Rules1</code>:  <em>the length of one burst should never over the initial length</em></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">// &#123;&#123;&#123; purpose : check the  burst length  </span></span><br><span class="line"><span class="keyword">always</span> @(*)</span><br><span class="line"><span class="keyword">if</span> (f_axi_wr_pending &gt; <span class="number">0</span>)</span><br><span class="line">	<span class="comment">// if there are pending data in last burst, protocol allows that </span></span><br><span class="line">	<span class="comment">// All the number of data should be less than  (len plus 1)</span></span><br><span class="line">	<span class="keyword">assert</span>(f_axi_wr_pending &lt;= f_axi_wr_len + <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p><code>rules2</code>: <em>the length should never over 256 , wich means it’s address space should over 4KB</em></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="comment">// 9&#x27;h100 is equal to 2^8 , etc, 256 . </span></span><br><span class="line">	<span class="comment">// the length of one burst should obey less than 256 , that means </span></span><br><span class="line">	<span class="comment">// the whole address space is less than 4KB</span></span><br><span class="line">	<span class="keyword">assert</span>(f_axi_wr_pending &lt;= <span class="number">9&#x27;h100</span>);</span><br><span class="line">	<span class="comment">//&#125;&#125;&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p><code>rules3</code>: <em>the length of wrap burst is limited ! Only  4 tpyes are allowed !</em></p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">// &#123;&#123;&#123;assert the len_signal of wrap type burst</span></span><br><span class="line"><span class="keyword">always</span> @(*)</span><br><span class="line"><span class="comment">// there are still data to be transfered in the last burst</span></span><br><span class="line"><span class="comment">// And it is the wrap type burst !</span></span><br><span class="line"><span class="keyword">if</span> ((f_axi_wr_pending &gt; <span class="number">0</span>)&amp;&amp;(f_axi_wr_burst == <span class="number">2&#x27;b10</span>))</span><br><span class="line">	<span class="comment">// the length of wrap burst type must be one of 1 ,3 ,7, 15  </span></span><br><span class="line">	<span class="keyword">assert</span>((f_axi_wr_len == <span class="number">1</span>)</span><br><span class="line">		 ||(f_axi_wr_len == <span class="number">3</span>)</span><br><span class="line">		 ||(f_axi_wr_len == <span class="number">7</span>)</span><br><span class="line">		 ||(f_axi_wr_len == <span class="number">15</span>));</span><br><span class="line">	<span class="comment">//&#125;&#125;&#125;</span></span><br></pre></td></tr></table></figure>





<h1 id="4-R-addr-checking"><a href="#4-R-addr-checking" class="headerlink" title="4. R addr checking"></a>4. R addr checking</h1><p>在这开始之前有要用到一推莫名其妙的寄存器，或者一大推前面的相关计算。直接全部移动到这里，就不进行跳转了。下面是一系列需要使用的寄存器（暂时不知道使用目的和逻辑功能）</p>
<h2 id="4-1-Register"><a href="#4-1-Register" class="headerlink" title="4.1 Register"></a>4.1 Register</h2><blockquote>
<p>记录 number of burst 、 number of data_outstanding </p>
</blockquote>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Induction information</span></span><br><span class="line"><span class="keyword">output</span>	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rd_nbursts,</span><br><span class="line"><span class="keyword">output</span>	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rd_outstanding,</span><br><span class="line"><span class="comment">// Address writes without write valids</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>help to check read number Counter</p>
</blockquote>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// RD_COUNT: increment on read w/o last, cleared on read w/ last</span></span><br><span class="line"><span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line"><span class="keyword">output</span> <span class="keyword">reg</span>	[IW-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rd_checkid,</span><br><span class="line"><span class="keyword">output</span> <span class="keyword">reg</span>			    	f_axi_rd_ckvalid,</span><br><span class="line"><span class="keyword">output</span> <span class="keyword">reg</span>	[<span class="number">9</span>-<span class="number">1</span>:<span class="number">0</span>]			f_axi_rd_cklen,</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">output</span>	<span class="keyword">reg</span>		[AW-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rd_ckaddr,<span class="comment">// Read address</span></span><br><span class="line"><span class="keyword">output</span>	<span class="keyword">wire</span>	[<span class="number">7</span>:<span class="number">0</span>]			f_axi_rd_ckincr,</span><br><span class="line"><span class="keyword">output</span>	<span class="keyword">reg</span>	[<span class="number">1</span>:<span class="number">0</span>]			f_axi_rd_ckburst,</span><br><span class="line"><span class="keyword">output</span>	<span class="keyword">reg</span>	[<span class="number">2</span>:<span class="number">0</span>]			f_axi_rd_cksize,</span><br><span class="line"><span class="keyword">output</span>	<span class="keyword">reg</span>	[<span class="number">7</span>:<span class="number">0</span>]			f_axi_rd_ckarlen,</span><br><span class="line"><span class="keyword">output</span>	<span class="keyword">reg</span>					f_axi_rd_cklockd,</span><br><span class="line"></span><br><span class="line"><span class="keyword">output</span>	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rdid_nbursts,</span><br><span class="line"><span class="keyword">output</span>	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rdid_outstanding,</span><br><span class="line"><span class="keyword">output</span>	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rdid_ckign_nbursts,</span><br><span class="line"><span class="keyword">output</span>	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rdid_ckign_outstanding,</span><br><span class="line"><span class="comment">// &#125;&#125;&#125;</span></span><br></pre></td></tr></table></figure>



<h2 id="4-2-check"><a href="#4-2-check" class="headerlink" title="4.2 check"></a>4.2 check</h2><p>在本小结中，关心两个信号的使用方法和逻辑： <code>check_this_read_burst</code> ， <code>check_this_return</code>；</p>
<p>第一段代码<code>check_this_read_burst</code>是用于检查读取突发。太复杂，争取理解清楚，不理解的<strong>及时跳过</strong>。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assign</span>	check_this_read_burst = (</span><br><span class="line">     			   i_axi_reset_n</span><br><span class="line">			&amp;&amp; !f_axi_rd_ckvalid </span><br><span class="line">     			&amp;&amp; f_axi_rd_check</span><br><span class="line">			&amp;&amp; i_axi_arid == f_axi_rd_checkid</span><br><span class="line">			&amp;&amp; axi_ard_req</span><br><span class="line">			&amp;&amp; F_OPT_READCHECK</span><br><span class="line">   );</span><br></pre></td></tr></table></figure>

<ul>
<li>AXI总线未被复位（<code>i_axi_reset_n</code>）</li>
<li>未通过读取有效性检查（<code>!f_axi_rd_ckvalid</code>）</li>
<li>需要进行读取检查（<code>f_axi_rd_check</code>）</li>
<li>读取请求的ID与检查ID相匹配（<code>i_axi_arid == f_axi_rd_checkid</code>）</li>
<li>存在读取请求（<code>axi_ard_req</code>）</li>
<li>开启了读取检查选项（<code>F_OPT_READCHECK</code>）</li>
</ul>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assign</span>	check_this_return = (</span><br><span class="line">     			   i_axi_reset_n</span><br><span class="line">			&amp;&amp; f_axi_rd_ckvalid</span><br><span class="line">			&amp;&amp; i_axi_rid == f_axi_rd_checkid</span><br><span class="line">			&amp;&amp; (f_axi_rdid_ckign_nbursts == <span class="number">0</span>)</span><br><span class="line">			&amp;&amp; i_axi_rvalid);</span><br></pre></td></tr></table></figure>

<ul>
<li>AXI总线未被复位（<code>i_axi_reset_n</code>）</li>
<li>通过了读取有效性检查（<code>f_axi_rd_ckvalid</code>）</li>
<li>读取返回的ID与检查ID相匹配（<code>i_axi_rid == f_axi_rd_checkid</code>）</li>
<li>读取操作已完成（<code>f_axi_rdid_ckign_nbursts == 0</code>）</li>
<li>读取返回有效（<code>i_axi_rvalid</code>）</li>
</ul>
<blockquote>
<p><em>F_OPT_READCHECK</em>  : check special read burst</p>
</blockquote>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// F_OPT_READCHECK, if set to one, will generate and check a</span></span><br><span class="line"><span class="comment">// particular read burst, to make certain that it gets the appropriate</span></span><br><span class="line"><span class="comment">// response, ID, and LAST value</span></span><br><span class="line"><span class="keyword">parameter</span> [<span class="number">0</span>:<span class="number">0</span>]			F_OPT_READCHECK = <span class="number">1</span>,</span><br></pre></td></tr></table></figure>

<blockquote>
<p><em>axi_ard_req</em> :  the handshake on AR channel on thge side of the master</p>
</blockquote>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assign</span>	axi_ard_req = (i_axi_arvalid)&amp;&amp;(i_axi_arready);</span><br></pre></td></tr></table></figure>

<blockquote>
<p><em>f_axi_rd_ckvalid</em> : </p>
</blockquote>
<p>该信号在后续的部分 <code>Packet read checking</code> 中会有提及，但由于代码离该部分太远，涉及诸多复杂信号，所以在这里只是简单概括一下他的功能。该信号用于检测一个 <em>read package</em> 的检测。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">initial</span>	f_axi_rd_ckvalid = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line"><span class="keyword">if</span> (!i_axi_reset_n)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	f_axi_rd_ckvalid &lt;= <span class="number">0</span>;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">     <span class="keyword">if</span> (check_this_read_burst) <span class="keyword">begin</span></span><br><span class="line">		<span class="comment">// Decide to check the length of this burst</span></span><br><span class="line">		f_axi_rd_ckvalid &lt;= <span class="number">1&#x27;b1</span>;</span><br><span class="line">		<span class="comment">// **********************</span></span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">if</span> (check_this_return &amp;&amp; i_axi_rready)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">       <span class="comment">//************************</span></span><br><span class="line">		<span class="keyword">if</span> (i_axi_rlast)</span><br><span class="line">			f_axi_rd_ckvalid &lt;= <span class="number">1&#x27;b0</span>;</span><br><span class="line">	<span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>上面的代码描述了一个简单的行为逻辑：<em>when we assert the signal named read_burst to assert the check signal  f_axi_rd_chvalid , this behavior will put down the read_burst itself , the logic will never reache the first if statement , except that the check_this_return signal in the second if statement deassert the re_ckvalid signal again !</em>  一个我戏称为“跷跷板”的行为过程。</p>
<blockquote>
<p><em>f_axi_rd_ckeck</em> :</p>
</blockquote>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//******</span></span><br><span class="line"><span class="keyword">wait</span>(i_axi_arvalid &amp;&amp; i_axi_arready);</span><br><span class="line">f_axi_rd_check = (i_axi_arid == r_axi_rd_checkid);</span><br><span class="line"><span class="comment">//******</span></span><br><span class="line">(* anyseq *)	<span class="keyword">reg</span>			f_axi_rd_check;</span><br></pre></td></tr></table></figure>

<p>这个在 <code>SIMULATIO</code>逻辑中有定义，但是作者没有使用相应的 &#96;&#96;define&#96;。所以这个信号是一个任意的数值信号，在一些周期中任意在 <em>0</em> 、<em>1</em> 之间进行变化。</p>
<p>但是代码中的这个逻辑： <code>f_axi_rd_check  &amp;&amp; i_axi_arid == f_axi_rd_checkid</code>并没有使功能受损。</p>
<blockquote>
<p>f_axi_rdid_ckign_nbursts &#x3D;&#x3D; 0</p>
</blockquote>
<p>对一个 <em>ID</em> 发起多个 <em>burst</em> ，如果现在是最后一个 <em>burst</em> 信号的话，那么有效；（如果后续涉及到更多的问题，在回过头来更改。）</p>
<h2 id="4-3-rd-pending-（UNUSED）"><a href="#4-3-rd-pending-（UNUSED）" class="headerlink" title="4.3 rd_pending （UNUSED）"></a>4.3 rd_pending （UNUSED）</h2><p>根据我对相关代码的解读，这个部分并没有使用，被归纳在最后的 <code>UNUSED</code>中。不如在这里先看看什么东西以后不需要花费过多的时间进行细看。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Make Verilator happy</span></span><br><span class="line"><span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">// Verilator lint_off UNUSED</span></span><br><span class="line"><span class="keyword">wire</span>	unused;</span><br><span class="line"><span class="keyword">assign</span>	unused = &amp;&#123; <span class="number">1&#x27;b0</span>, awr_aligned, rd_aligned, ard_aligned,</span><br><span class="line">		rd_pending &#125;;</span><br><span class="line"><span class="comment">// Verilator lint_on  UNUSED</span></span><br><span class="line"><span class="comment">// &#125;&#125;&#125;</span></span><br></pre></td></tr></table></figure>



<h2 id="4-4-get-initial-signals-FORMAL-need"><a href="#4-4-get-initial-signals-FORMAL-need" class="headerlink" title="4.4 get initial signals FORMAL need"></a>4.4 get initial signals FORMAL need</h2><blockquote>
<p><strong>Name</strong>：无名</p>
<p><strong>Purpose</strong>: 获得将要进行 <em>formal property</em> 计算的信号数据；</p>
<p><strong>Description</strong>：好比软件函数中的 <code>形参</code>一样，这里会在确定进行 <em>read burst check</em> 的时候，传入初始的 <code>AR channel information</code>。 <em>formal property</em> 中的 <em>f_register</em> 会 <em>copy</em> 这些信号参数来进行相关的计算，在这过程中不影响原本的输入参数。</p>
</blockquote>
<p>分为两个部分进行检测。</p>
<ul>
<li>如果是<em>check read burst address</em>，在相关信号有效的情况下，直接将 <em>AW channel</em> 信息写入 <em>formal_register</em> ；</li>
<li>如果是<em>check read data burst</em>， 将计算出来的下一个地址 <em>next_addr</em> 设置为新的<em>formal_register_addr</em>；</li>
</ul>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">if</span> (check_this_read_burst)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">		f_axi_rd_ckburst &lt;= i_axi_arburst;</span><br><span class="line">		f_axi_rd_cksize  &lt;= i_axi_arsize;</span><br><span class="line">		f_axi_rd_ckarlen &lt;= i_axi_arlen;</span><br><span class="line">		f_axi_rd_ckaddr  &lt;= i_axi_araddr;</span><br><span class="line">		f_axi_rd_cklockd &lt;= i_axi_arlock;</span><br><span class="line">		<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">if</span> (check_this_return &amp;&amp; axi_rd_ack)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		f_axi_rd_ckaddr  &lt;= next_rd_addr;</span><br><span class="line">	<span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>如果设置为  <code>NO_narrow_is_allowed</code>，对 <code>read_size</code>的大小进行固定；</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">// f_axi_rd_cksize limiting</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">if</span> (!OPT_NARROW_BURST)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="comment">// In this case, all size parameters are fixed.</span></span><br><span class="line">		<span class="comment">// Let&#x27;s remove them from the solvers logic choices</span></span><br><span class="line">		<span class="comment">// for optimization purposes</span></span><br><span class="line">		<span class="comment">//</span></span><br><span class="line">		<span class="keyword">if</span> (DW == <span class="number">8</span>)</span><br><span class="line">			f_axi_rd_cksize &lt;= <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (DW == <span class="number">16</span>)</span><br><span class="line">			f_axi_rd_cksize &lt;= <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (DW == <span class="number">32</span>)</span><br><span class="line">			f_axi_rd_cksize &lt;= <span class="number">2</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (DW == <span class="number">64</span>)</span><br><span class="line">			f_axi_rd_cksize &lt;= <span class="number">3</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (DW == <span class="number">128</span>)</span><br><span class="line">			f_axi_rd_cksize &lt;= <span class="number">4</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (DW == <span class="number">256</span>)</span><br><span class="line">			f_axi_rd_cksize &lt;= <span class="number">5</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (DW == <span class="number">512</span>)</span><br><span class="line">			f_axi_rd_cksize &lt;= <span class="number">6</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="comment">// if (DW == 1024)</span></span><br><span class="line">			f_axi_rd_cksize &lt;= <span class="number">7</span>;</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>





<h1 id="5-R-channel-validate"><a href="#5-R-channel-validate" class="headerlink" title="5. R channel validate"></a>5. R channel validate</h1><h2 id="5-1-rdaddr-validate"><a href="#5-1-rdaddr-validate" class="headerlink" title="5.1 rdaddr_validate"></a>5.1 rdaddr_validate</h2><blockquote>
<p><em><strong>Name</strong></em>：<code>faxi_valaddr</code> —— <code>f_rdaddr_validate</code></p>
<p><strong>Purpose</strong>:  使用 <em>axi</em> 协议检查即将到来的地址信号(the incoming address)是否有效；</p>
<p><strong>Description</strong>：在 AR channel 中，arvalid asserted 表示 araddress valid。但是不能收到valid信号就真的表示地址有效，还需要使用<em>formal property</em> 进一步验证。具体的内部使用信息见：<a target="_blank" rel="noopener" href="http://xlxwzybds.cn/2023/11/26/formal-valaddr/">formal_valaddr | 冰蒂斯の (xlxwzybds.cn)</a>      </p>
<p><strong>Attention</strong>：<font color="red">再次强调这里虽然使用的 <em>axifull property</em>，但是实际上实现的是 <em>axi-lite</em>。</font>因为<em>axi-lite</em>协议并没有 <em>burst</em> 能力，所以在参数的选择上，应该 <code>set 0</code>。 <em>NARROW_BURST</em> 实际上只是允许 <em>narrow transfer</em> 的能力，和 <em>burst</em> 关系不大。</p>
</blockquote>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">always</span> @(*)</span><br><span class="line"><span class="keyword">if</span> (i_axi_arvalid &amp;&amp; (f_past_valid || F_OPT_INITIAL))</span><br><span class="line">	`SLAVE_ASSUME(valid_iraddr);</span><br></pre></td></tr></table></figure>

<p>这段代码就是我的上面解释的佐证。如果非初始复位状态 <em>f_past_valid &#x3D;&#x3D;1</em> ，只要 <code>rdvalid</code>有效，或者是设置了自己的初始状态，都会要求<em>master design</em> 提供的 <em>all information about AW is valid</em> 。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">faxi_valaddr #(</span><br><span class="line">	<span class="variable">.C_AXI_DATA_WIDTH</span>(DW), </span><br><span class="line">	<span class="variable">.C_AXI_ADDR_WIDTH</span>(AW),</span><br><span class="line">	<span class="variable">.OPT_MAXBURST</span>(OPT_MAXBURST),</span><br><span class="line">	<span class="variable">.OPT_EXCLUSIVE</span>(OPT_EXCLUSIVE),</span><br><span class="line">	<span class="variable">.OPT_NARROW_BURST</span>(OPT_NARROW_BURST)</span><br><span class="line">) f_rdaddr_validate(</span><br><span class="line">		i_axi_araddr, i_axi_arlen,</span><br><span class="line">		i_axi_arsize, i_axi_arburst, i_axi_arlock,</span><br><span class="line">		<span class="number">1&#x27;b1</span>, ard_aligned, valid_iraddr</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>按照旧例提示2点：1.这里的 <em>MAXBURST</em> 参数设置为 <em>0</em>，表示使用 <em>axi-lite</em> ； 2. <em>inital</em> 参数直接设置为 <em>1</em></p>
<h2 id="5-2-next-rd-addr"><a href="#5-2-next-rd-addr" class="headerlink" title="5.2 next_rd_addr"></a>5.2 next_rd_addr</h2><blockquote>
<p><em><strong>Name</strong></em>：<code>next_rd_addr</code> </p>
<p><strong>Purpose</strong>:  通过四个输入信号数据： <code>i_last_addr</code>, <code>i_size</code> , <code>i_burst</code> , <code>i_len</code> 计算出下一个地址 <code>next_addr</code>、以及地址增长的 <code>increment</code>。</p>
<p><strong>Description</strong>：在 <em>AW</em> 相关的通道计算中，一直不停的计算<em>next_write_address</em> 并不是<em>axi-full</em> 需要像 <em>axi-lite</em> 一样每次的传输都要求 <em>data must associated witd one address</em>。计算 <em>next_addr</em> 的目的只适用于给 <code>formal_valpending</code>模块检测该行为过程是否满足 <em>read proerty</em>。</p>
<p>​	一句话，计算出来不是给自己使用的，而是给 <em>induciton_formal_property</em> 进行检测。</p>
</blockquote>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">faxi_addr #(</span><br><span class="line">	<span class="variable">.AW</span>(AW)</span><br><span class="line">) get_next_raddr(</span><br><span class="line">	f_axi_rd_ckaddr,</span><br><span class="line">	f_axi_rd_cksize,</span><br><span class="line">	f_axi_rd_ckburst,</span><br><span class="line">	f_axi_rd_ckarlen,</span><br><span class="line">	f_axi_rd_ckincr, <span class="comment">// the signal output , </span></span><br><span class="line">     					 <span class="comment">//	do not used inside the faxi_master property</span></span><br><span class="line">	next_rd_addr     <span class="comment">// to valpedning calculation part</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h1 id="6-R-induction-property"><a href="#6-R-induction-property" class="headerlink" title="6. R induction property"></a>6. R induction property</h1><h2 id="6-1-rdaddr-valpending"><a href="#6-1-rdaddr-valpending" class="headerlink" title="6.1 rdaddr_valpending"></a>6.1 rdaddr_valpending</h2><p>每次迭代的时候，将检测的<em>burst length</em>进行更新，后面会知道怎么更新的<em>re_cklen</em>信号，现在先按下不表。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">always</span> @(*)</span><br><span class="line">	val_rd_cklen= f_axi_rd_cklen[<span class="number">7</span>:<span class="number">0</span>]-<span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>在开始的时候，执行和 <code>rdaddr_validate</code>模块一样的功能。在非突发的第一个周期中，会不断的进行检测。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">faxi_valaddr #(</span><br><span class="line">	<span class="variable">.C_AXI_DATA_WIDTH</span>(DW), </span><br><span class="line">	<span class="variable">.C_AXI_ADDR_WIDTH</span>(AW),</span><br><span class="line">	<span class="variable">.OPT_MAXBURST</span>(OPT_MAXBURST),</span><br><span class="line">	<span class="variable">.OPT_EXCLUSIVE</span>(OPT_EXCLUSIVE),</span><br><span class="line">	<span class="variable">.OPT_NARROW_BURST</span>(OPT_NARROW_BURST)</span><br><span class="line">) f_rdaddr_valpending(</span><br><span class="line">	f_axi_rd_ckaddr, </span><br><span class="line">	val_rd_cklen,</span><br><span class="line">	f_axi_rd_cksize, </span><br><span class="line">	f_axi_rd_ckburst, </span><br><span class="line">	f_axi_rd_cklockd,</span><br><span class="line">	(f_axi_rd_cklen != f_axi_rd_ckarlen+<span class="number">1</span>) ? <span class="number">1&#x27;b0</span> : <span class="number">1&#x27;b1</span>,</span><br><span class="line">	rd_aligned, <span class="comment">// UNUSED ！！！！</span></span><br><span class="line">	valid_praddr</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>每次都会将上下需要传输的所有信号，当做一个全新的<em>burst transation</em>进行检测地址信号是否对齐。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">always</span> @(*)</span><br><span class="line"><span class="keyword">if</span> (f_axi_rd_ckvalid)</span><br><span class="line">	<span class="keyword">assert</span>(valid_praddr);</span><br></pre></td></tr></table></figure>



<h2 id="6-2-WRAP-arlen-check"><a href="#6-2-WRAP-arlen-check" class="headerlink" title="6.2 WRAP arlen check"></a>6.2 WRAP arlen check</h2><p>检测每次 <em>burst</em> 传输的 <em>arlen</em> 信息是否正确。需要注意， <code>f_axi_rd_ckarlen</code>信号只会在 <code>check_this_read_burst</code> 的时候，由外部的 <em>burst</em> 信息传入。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f_axi_rd_ckarlen &lt;= i_axi_arlen;</span><br></pre></td></tr></table></figure>

<p>固定长度检查，不过多赘述。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WRAP mode ARLEN validity checking</span></span><br><span class="line"><span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line"><span class="keyword">always</span> @(*)</span><br><span class="line"><span class="keyword">if</span> (f_axi_rd_ckvalid &amp;&amp; f_axi_rd_ckburst == <span class="number">2&#x27;b10</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">assert</span>((f_axi_rd_ckarlen == <span class="number">15</span>)</span><br><span class="line">		||(f_axi_rd_ckarlen == <span class="number">7</span>)</span><br><span class="line">		||(f_axi_rd_ckarlen == <span class="number">3</span>)</span><br><span class="line">		||(f_axi_rd_ckarlen == <span class="number">1</span>));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">// &#125;&#125;&#125;</span></span><br></pre></td></tr></table></figure>



<h2 id="6-3-Matching-ckarlen-to-cklen"><a href="#6-3-Matching-ckarlen-to-cklen" class="headerlink" title="6.3 Matching ckarlen to cklen"></a>6.3 Matching ckarlen to cklen</h2><p>在这一部分，需要明确两个信号的使用方式。 <code>f_axi_rd_cklen &amp; f_axi_rd_ckarlen</code> 。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">always</span> @(*)</span><br><span class="line"><span class="keyword">if</span> (f_axi_rd_ckvalid)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">     	<span class="comment">// 我知道用于不断减少计算的 rd_cklen 不大于初始的 burst length</span></span><br><span class="line">	<span class="keyword">assert</span>(f_axi_rd_cklen &lt;= f_axi_rd_ckarlen+<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">     	<span class="comment">//但是为什么ckign &gt; 0 的时候，需要保持着两个信号相等？？？？？</span></span><br><span class="line">	<span class="keyword">if</span> (f_axi_rdid_ckign_nbursts &gt; <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">assert</span>(f_axi_rd_cklen == f_axi_rd_ckarlen+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>



<p>一些不重要的代码</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Filename: 	faxi_master.v (Formal properties of an AXI4 (full) master)</span></span><br><span class="line"><span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">// Project:	WB2AXIPSP: bus bridges and other odds and ends</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Purpose:	This file contains a set of formal properties which can be</span></span><br><span class="line"><span class="comment">//		used to formally verify that a core truly follows the full</span></span><br><span class="line"><span class="comment">//	AXI4 specification.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Creator:	Dan Gisselquist, Ph.D.</span></span><br><span class="line"><span class="comment">//		Gisselquist Technology, LLC</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">// Copyright (C) 2017-2023, Gisselquist Technology, LLC</span></span><br><span class="line"><span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">// This digital logic component is the proprietary property of Gisselquist</span></span><br><span class="line"><span class="comment">// Technology, LLC.  It may only be distributed and/or re-distributed by the</span></span><br><span class="line"><span class="comment">// express permission of Gisselquist Technology.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Permission has been granted to the Patreon sponsors of the ZipCPU blog</span></span><br><span class="line"><span class="comment">// to use this logic component as they see fit, but not to redistribute it</span></span><br><span class="line"><span class="comment">// beyond their individual personal or commercial use.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// This component is distributed in the hope that it will be useful, but</span></span><br><span class="line"><span class="comment">// WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTIBILITY</span></span><br><span class="line"><span class="comment">// or FITNESS FOR A PARTICULAR PURPOSE.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Please feel free to contact me should you have any questions, or even if you</span></span><br><span class="line"><span class="comment">// just want to ask about what you find within here.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Yours,</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Dan Gisselquist</span></span><br><span class="line"><span class="comment">// Owner</span></span><br><span class="line"><span class="comment">// Gisselquist Technology, LLC</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">`<span class="keyword">default_nettype</span>	none</span></span><br><span class="line"><span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"><span class="keyword">module</span> faxi_master #(</span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">parameter</span> C_AXI_ID_WIDTH	= <span class="number">3</span>, <span class="comment">// The AXI id width used for R&amp;W</span></span><br><span class="line">                                             <span class="comment">// This is an int between 1-16</span></span><br><span class="line">	<span class="keyword">parameter</span> C_AXI_DATA_WIDTH	= <span class="number">128</span>,<span class="comment">// Width of the AXI R&amp;W data</span></span><br><span class="line">	<span class="keyword">parameter</span> C_AXI_ADDR_WIDTH	= <span class="number">28</span>,	<span class="comment">// AXI Address width (log wordsize)</span></span><br><span class="line">	<span class="keyword">parameter</span> [<span class="number">7</span>:<span class="number">0</span>] OPT_MAXBURST	= <span class="number">8&#x27;hff</span>,<span class="comment">// Maximum burst length, minus 1</span></span><br><span class="line">	<span class="keyword">parameter</span> [<span class="number">0</span>:<span class="number">0</span>] OPT_EXCLUSIVE	= <span class="number">1</span>,<span class="comment">// Exclusive access allowed</span></span><br><span class="line">	<span class="keyword">parameter</span> [<span class="number">0</span>:<span class="number">0</span>] OPT_NARROW_BURST = <span class="number">1</span>,<span class="comment">// Narrow bursts allowed by default</span></span><br><span class="line">	<span class="keyword">parameter</span> [<span class="number">0</span>:<span class="number">0</span>]	OPT_ASYNC_RESET  = <span class="number">0</span>,</span><br><span class="line">	<span class="comment">// F_OPT_ASSUME_RESET, if set, will cause the design to *assume* the</span></span><br><span class="line">	<span class="comment">// existence of a correct reset, rather than asserting it.  It is</span></span><br><span class="line">	<span class="comment">// appropriate anytime the reset logic is outside of the circuit being</span></span><br><span class="line">	<span class="comment">// examined</span></span><br><span class="line">	<span class="keyword">parameter</span> [<span class="number">0</span>:<span class="number">0</span>]			F_OPT_ASSUME_RESET = <span class="number">1&#x27;b1</span>,</span><br><span class="line">	<span class="keyword">parameter</span> [<span class="number">0</span>:<span class="number">0</span>]			F_OPT_NO_RESET = <span class="number">1&#x27;b1</span>,</span><br><span class="line">	<span class="comment">// F_LGDEPTH is the number of bits necessary to count the maximum</span></span><br><span class="line">	<span class="comment">// number of items in flight.</span></span><br><span class="line">	<span class="keyword">parameter</span>				F_LGDEPTH      = <span class="number">10</span>,</span><br><span class="line">	<span class="keyword">parameter</span>	[(F_LGDEPTH-<span class="number">1</span>):<span class="number">0</span>]	F_AXI_MAXSTALL = <span class="number">3</span>,</span><br><span class="line">	<span class="keyword">parameter</span>	[(F_LGDEPTH-<span class="number">1</span>):<span class="number">0</span>]	F_AXI_MAXRSTALL= <span class="number">3</span>,</span><br><span class="line">	<span class="keyword">parameter</span>	[(F_LGDEPTH-<span class="number">1</span>):<span class="number">0</span>]	F_AXI_MAXDELAY = <span class="number">3</span>,</span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// F_OPT_READCHECK, if set to one, will generate and check a</span></span><br><span class="line">	<span class="comment">// particular read burst, to make certain that it gets the appropriate</span></span><br><span class="line">	<span class="comment">// response, ID, and LAST value</span></span><br><span class="line">	<span class="keyword">parameter</span> [<span class="number">0</span>:<span class="number">0</span>]			F_OPT_READCHECK = <span class="number">1</span>,</span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// F_OPT_INITIAL, if set, will insist on correct values on the intial</span></span><br><span class="line">	<span class="comment">// timestep--the same timestep that should also have a reset</span></span><br><span class="line">	<span class="keyword">parameter</span> [<span class="number">0</span>:<span class="number">0</span>]			F_OPT_INITIAL = <span class="number">1</span>,</span><br><span class="line">	<span class="keyword">localparam</span>			F_OPT_BURSTS    = (OPT_MAXBURST != <span class="number">0</span>),</span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">localparam</span> IW			= C_AXI_ID_WIDTH,</span><br><span class="line">	<span class="keyword">localparam</span> DW			= C_AXI_DATA_WIDTH,</span><br><span class="line">	<span class="keyword">localparam</span> AW			= C_AXI_ADDR_WIDTH</span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	) (</span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>			i_clk,	<span class="comment">// System clock</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>			i_axi_reset_n,</span><br><span class="line">	<span class="comment">// AW* : AXI write address channel signals</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>			i_axi_awvalid,	<span class="comment">// Write address valid</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>			i_axi_awready,<span class="comment">//Slave is ready to accept</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[IW-<span class="number">1</span>:<span class="number">0</span>]	i_axi_awid,	<span class="comment">// Write ID</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[AW-<span class="number">1</span>:<span class="number">0</span>]	i_axi_awaddr,	<span class="comment">// Write address</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">7</span>:<span class="number">0</span>]		i_axi_awlen,	<span class="comment">// Write Burst Length</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">2</span>:<span class="number">0</span>]		i_axi_awsize,	<span class="comment">// Write Burst size</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">1</span>:<span class="number">0</span>]		i_axi_awburst,	<span class="comment">// Write Burst type</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">0</span>:<span class="number">0</span>]		i_axi_awlock,	<span class="comment">// Write lock type</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">3</span>:<span class="number">0</span>]		i_axi_awcache,	<span class="comment">// Write Cache type</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">2</span>:<span class="number">0</span>]		i_axi_awprot,	<span class="comment">// Write Protection type</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">3</span>:<span class="number">0</span>]		i_axi_awqos,	<span class="comment">// Write Quality of Svc</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">// W* : AXI write data channel signals</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>			i_axi_wvalid,	<span class="comment">// Write valid</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>			i_axi_wready,	<span class="comment">// Write data ready</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[DW-<span class="number">1</span>:<span class="number">0</span>]	i_axi_wdata,	<span class="comment">// Write data</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[DW/<span class="number">8</span>-<span class="number">1</span>:<span class="number">0</span>]	i_axi_wstrb,	<span class="comment">// Write strobes</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>			i_axi_wlast,	<span class="comment">// Last write transaction</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">// B* : AXI write response channel signals</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>			i_axi_bvalid,  <span class="comment">// Write reponse valid</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>			i_axi_bready,  <span class="comment">// Response ready</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[IW-<span class="number">1</span>:<span class="number">0</span>]	i_axi_bid,	<span class="comment">// Response ID</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">1</span>:<span class="number">0</span>]		i_axi_bresp,	<span class="comment">// Write response</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">// AR* : AXI read address channel signals</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>			i_axi_arvalid,	<span class="comment">// Read address valid</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>			i_axi_arready,	<span class="comment">// Read address ready</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[IW-<span class="number">1</span>:<span class="number">0</span>]	i_axi_arid,	<span class="comment">// Read ID</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[AW-<span class="number">1</span>:<span class="number">0</span>]	i_axi_araddr,	<span class="comment">// Read address</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">7</span>:<span class="number">0</span>]		i_axi_arlen,	<span class="comment">// Read Burst Length</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">2</span>:<span class="number">0</span>]		i_axi_arsize,	<span class="comment">// Read Burst size</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">1</span>:<span class="number">0</span>]		i_axi_arburst,	<span class="comment">// Read Burst type</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">0</span>:<span class="number">0</span>]		i_axi_arlock,	<span class="comment">// Read lock type</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">3</span>:<span class="number">0</span>]		i_axi_arcache,	<span class="comment">// Read Cache type</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">2</span>:<span class="number">0</span>]		i_axi_arprot,	<span class="comment">// Read Protection type</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">3</span>:<span class="number">0</span>]		i_axi_arqos,	<span class="comment">// Read Protection type</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">// R* : AXI read data channel signals</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>			i_axi_rvalid,  <span class="comment">// Read reponse valid</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>			i_axi_rready,  <span class="comment">// Read Response ready</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[IW-<span class="number">1</span>:<span class="number">0</span>]	i_axi_rid,     <span class="comment">// Response ID</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[DW-<span class="number">1</span>:<span class="number">0</span>]	i_axi_rdata,    <span class="comment">// Read data</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">1</span>:<span class="number">0</span>]		i_axi_rresp,   <span class="comment">// Read response</span></span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>			i_axi_rlast,    <span class="comment">// Read last</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">// Induction information</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_awr_nbursts,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[<span class="number">9</span>-<span class="number">1</span>:<span class="number">0</span>]			f_axi_wr_pending,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rd_nbursts,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rd_outstanding,</span><br><span class="line">		<span class="comment">// Address writes without write valids</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// WR_COUNT:</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[IW-<span class="number">1</span>:<span class="number">0</span>]		f_axi_wr_checkid,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>				f_axi_wr_ckvalid,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_wrid_nbursts,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[AW-<span class="number">1</span>:<span class="number">0</span>]		f_axi_wr_addr,	<span class="comment">// Write address</span></span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">wire</span>	[<span class="number">7</span>:<span class="number">0</span>]			f_axi_wr_incr,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[<span class="number">1</span>:<span class="number">0</span>]			f_axi_wr_burst,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[<span class="number">2</span>:<span class="number">0</span>]			f_axi_wr_size,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[<span class="number">7</span>:<span class="number">0</span>]			f_axi_wr_len,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>				f_axi_wr_lockd,</span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">// RD_COUNT: increment on read w/o last, cleared on read w/ last</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">output</span> <span class="keyword">reg</span>	[IW-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rd_checkid,</span><br><span class="line">	<span class="keyword">output</span> <span class="keyword">reg</span>			    	f_axi_rd_ckvalid,</span><br><span class="line">	<span class="keyword">output</span> <span class="keyword">reg</span>	[<span class="number">9</span>-<span class="number">1</span>:<span class="number">0</span>]			f_axi_rd_cklen,</span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[AW-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rd_ckaddr,<span class="comment">// Read address</span></span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">wire</span>	[<span class="number">7</span>:<span class="number">0</span>]			f_axi_rd_ckincr,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[<span class="number">1</span>:<span class="number">0</span>]			f_axi_rd_ckburst,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[<span class="number">2</span>:<span class="number">0</span>]			f_axi_rd_cksize,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[<span class="number">7</span>:<span class="number">0</span>]			f_axi_rd_ckarlen,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>				f_axi_rd_cklockd,</span><br><span class="line"></span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rdid_nbursts,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rdid_outstanding,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rdid_ckign_nbursts,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rdid_ckign_outstanding,</span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">// Exclusive access handling</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">wire</span>	[<span class="number">1</span>:<span class="number">0</span>]			f_axi_ex_state,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">wire</span>				f_axi_ex_checklock,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">wire</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_rdid_bursts_to_lock,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">wire</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]		f_axi_wrid_bursts_to_exwrite,</span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>				i_active_lock,</span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[AW-<span class="number">1</span>:<span class="number">0</span>]		i_exlock_addr,</span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">7</span>:<span class="number">0</span>]			i_exlock_len,</span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">1</span>:<span class="number">0</span>]			i_exlock_burst,</span><br><span class="line">	<span class="keyword">input</span>	<span class="keyword">wire</span>	[<span class="number">2</span>:<span class="number">0</span>]			i_exlock_size,</span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">wire</span>	[AW-<span class="number">1</span>:<span class="number">0</span>]		f_axi_exreq_addr,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">wire</span>	[<span class="number">7</span>:<span class="number">0</span>]			f_axi_exreq_len,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">wire</span>	[<span class="number">1</span>:<span class="number">0</span>]			f_axi_exreq_burst,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">wire</span>	[<span class="number">2</span>:<span class="number">0</span>]			f_axi_exreq_size,</span><br><span class="line">	<span class="keyword">output</span>	<span class="keyword">wire</span>				f_axi_exreq_return</span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Parameter declarations</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">localparam</span> [<span class="number">1</span>:<span class="number">0</span>]	OKAY = <span class="number">2&#x27;b00</span>;</span><br><span class="line">	<span class="keyword">localparam</span> [<span class="number">1</span>:<span class="number">0</span>]	EXOKAY = <span class="number">2&#x27;b01</span>;</span><br><span class="line">	<span class="keyword">localparam</span>		F_AXI_MAXWAIT = F_AXI_MAXSTALL;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Because of the nature and size of bursts, which can be up to</span></span><br><span class="line">	<span class="comment">// 256 in length (AxLEN), the F_LGDEPTH parameter necessary to capture</span></span><br><span class="line">	<span class="comment">// this *must* be at least 8 bits wide</span></span><br><span class="line">	<span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">assert</span>(F_LGDEPTH &gt; <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Only power of two data sizes are supported from 8-bits on up to</span></span><br><span class="line">	<span class="comment">// 1024</span></span><br><span class="line">		<span class="keyword">assert</span>((DW == <span class="number">8</span>)</span><br><span class="line">			||(DW ==  <span class="number">16</span>)</span><br><span class="line">			||(DW ==  <span class="number">32</span>)</span><br><span class="line">			||(DW ==  <span class="number">64</span>)</span><br><span class="line">			||(DW == <span class="number">128</span>)</span><br><span class="line">			||(DW == <span class="number">256</span>)</span><br><span class="line">			||(DW == <span class="number">512</span>)</span><br><span class="line">			||(DW == <span class="number">1024</span>));</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Internal register and wire declarations</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">wire</span>	axi_rd_ack, axi_wr_ack, axi_ard_req, axi_awr_req, axi_wr_req;</span><br><span class="line">		<span class="comment">// axi_rd_err, axi_wr_err;</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">assign</span>	axi_ard_req = (i_axi_arvalid)&amp;&amp;(i_axi_arready);</span><br><span class="line">	<span class="keyword">assign</span>	axi_awr_req = (i_axi_awvalid)&amp;&amp;(i_axi_awready);</span><br><span class="line">	<span class="keyword">assign</span>	axi_wr_req  = (i_axi_wvalid )&amp;&amp;(i_axi_wready);</span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">assign</span>	axi_rd_ack = (i_axi_rvalid)&amp;&amp;(i_axi_rready);</span><br><span class="line">	<span class="keyword">assign</span>	axi_wr_ack = (i_axi_bvalid)&amp;&amp;(i_axi_bready);</span><br><span class="line">	<span class="comment">// assign axi_rd_err = (axi_rd_ack)&amp;&amp;(i_axi_rresp[1]);</span></span><br><span class="line">	<span class="comment">// assign axi_wr_err = (axi_wr_ack)&amp;&amp;(i_axi_bresp[1]);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">reg</span>	f_past_valid;</span><br><span class="line">	<span class="keyword">reg</span>	[<span class="number">3</span>:<span class="number">0</span>]	f_reset_length;</span><br><span class="line">	<span class="keyword">reg</span>	[AW-<span class="number">1</span>:<span class="number">0</span>]	r_axi_wr_addr;</span><br><span class="line">	<span class="keyword">wire</span>	[AW-<span class="number">1</span>:<span class="number">0</span>]	next_wr_addr;</span><br><span class="line">	<span class="comment">// wire	[7:0]		this_wr_incr;</span></span><br><span class="line">	<span class="keyword">reg</span>	[<span class="number">2</span>:<span class="number">0</span>]		this_awsize;</span><br><span class="line">	<span class="keyword">reg</span>			wr_aligned, awr_aligned,</span><br><span class="line">				rd_aligned, ard_aligned;</span><br><span class="line">	<span class="keyword">reg</span>			rd_pending;</span><br><span class="line">	<span class="keyword">wire</span>	[AW-<span class="number">1</span>:<span class="number">0</span>]	next_rd_addr;</span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Let the solver pick some arbitrary ID&#x27;s to be checked by this</span></span><br><span class="line">	<span class="comment">// checker</span></span><br><span class="line">	<span class="comment">// Verilator lint_off UNDRIVEN</span></span><br><span class="line"><span class="meta">`<span class="keyword">ifdef</span>	SIMULATION</span></span><br><span class="line">	<span class="keyword">reg</span>	[IW-<span class="number">1</span>:<span class="number">0</span>]	r_axi_wr_checkid;</span><br><span class="line">	<span class="keyword">reg</span>	[IW-<span class="number">1</span>:<span class="number">0</span>]	r_axi_rd_checkid;</span><br><span class="line">	<span class="keyword">reg</span>			f_axi_rd_check;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">initial</span>	r_axi_wr_checkid = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">initial</span>	r_axi_wr_checkid = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">wait</span>(i_axi_arvalid &amp;&amp; i_axi_arready);</span><br><span class="line">		f_axi_rd_check = (i_axi_arid == r_axi_rd_checkid);</span><br><span class="line">		@(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">			f_axi_rd_check &lt;= <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">wait</span>(i_axi_rvalid &amp;&amp; i_axi_rready &amp;&amp; i_axi_rlast &amp;&amp; i_axi_rready &amp;&amp; f_axi_rdid_ckign_nbursts == <span class="number">0</span>);</span><br><span class="line">		@(<span class="keyword">posedge</span> i_clk);</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="meta">`<span class="keyword">else</span></span></span><br><span class="line">	(* anyconst *)	<span class="keyword">reg</span>	[IW-<span class="number">1</span>:<span class="number">0</span>]	r_axi_wr_checkid;</span><br><span class="line">	(* anyconst *)	<span class="keyword">reg</span>	[IW-<span class="number">1</span>:<span class="number">0</span>]	r_axi_rd_checkid;</span><br><span class="line"></span><br><span class="line">	(* anyseq *)	<span class="keyword">reg</span>			f_axi_rd_check;</span><br><span class="line"><span class="meta">`<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Verilator lint_on  UNDRIVEN</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]	next_rd_nbursts,</span><br><span class="line">				next_rdid_nbursts,</span><br><span class="line">				next_rdno_nbursts,</span><br><span class="line">				next_rdign_nbursts;</span><br><span class="line">	<span class="keyword">reg</span>	[F_LGDEPTH-<span class="number">1</span>:<span class="number">0</span>]	next_rd_outstanding,</span><br><span class="line">				next_rdid_outstanding,</span><br><span class="line">				next_rdno_outstanding,</span><br><span class="line">				next_rdign_outstanding;</span><br><span class="line">	<span class="keyword">reg</span>	[(F_LGDEPTH-<span class="number">1</span>):<span class="number">0</span>]	f_wr_completed,</span><br><span class="line">					f_wrid_completed;</span><br><span class="line">	<span class="keyword">reg</span>		wstb_valid;</span><br><span class="line">	<span class="keyword">reg</span>	[<span class="number">6</span>:<span class="number">0</span>]	wstb_addr;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">reg</span>	[<span class="number">7</span>:<span class="number">0</span>]	val_wr_len;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">wire</span>	check_this_read_burst;</span><br><span class="line">	<span class="keyword">wire</span>	check_this_return;</span><br><span class="line">	<span class="keyword">reg</span>	valid_iraddr, valid_praddr;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">reg</span>	[<span class="number">7</span>:<span class="number">0</span>]	val_rd_cklen;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Within the slave core, we will *assume* properties from the master,</span></span><br><span class="line">	<span class="comment">// and *assert* properties of signals coming from the slave and</span></span><br><span class="line">	<span class="comment">// returning to the master.  This order will be reversed within the</span></span><br><span class="line">	<span class="comment">// master, and the following two definitions help us do that.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Similarly, we will always *assert* local values of our own necessary</span></span><br><span class="line">	<span class="comment">// for checks below.  Those will use the assert() keyword, rather than</span></span><br><span class="line">	<span class="comment">// either of these two macros.</span></span><br><span class="line"><span class="meta">`<span class="keyword">define</span>	SLAVE_ASSUME	assert</span></span><br><span class="line"><span class="meta">`<span class="keyword">define</span>	SLAVE_ASSERT	assume</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Setup</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// integer	k;</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">initial</span>	f_past_valid = <span class="number">1&#x27;b0</span>;</span><br><span class="line">	<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">		f_past_valid &lt;= <span class="number">1&#x27;b1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (!f_past_valid)</span><br><span class="line">		<span class="keyword">assert</span>(!i_axi_reset_n);</span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Reset properties</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Insist that the reset signal start out asserted (negative), and</span></span><br><span class="line">	<span class="comment">// remain so for 16 clocks.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">generate</span> <span class="keyword">if</span> (F_OPT_ASSUME_RESET)</span><br><span class="line">	<span class="keyword">begin</span> : ASSUME_INITIAL_RESET</span><br><span class="line">		<span class="keyword">always</span> @(*)</span><br><span class="line">		<span class="keyword">if</span> (!f_past_valid)</span><br><span class="line">			<span class="keyword">assume</span>(!i_axi_reset_n);</span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span> : ASSERT_INITIAL_RESET</span><br><span class="line">		<span class="keyword">always</span> @(*)</span><br><span class="line">		<span class="keyword">if</span> (!f_past_valid)</span><br><span class="line">			<span class="keyword">assert</span>(!i_axi_reset_n);</span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">endgenerate</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// If asserted, the reset must be asserted for a minimum of 16 clocks</span></span><br><span class="line">	<span class="keyword">initial</span>	f_reset_length = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">	<span class="keyword">if</span> (F_OPT_NO_RESET || i_axi_reset_n)</span><br><span class="line">		f_reset_length &lt;= <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (!(&amp;f_reset_length))</span><br><span class="line">		f_reset_length &lt;= f_reset_length + <span class="number">1&#x27;b1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">	<span class="keyword">if</span> ((f_past_valid)&amp;&amp; !F_OPT_NO_RESET</span><br><span class="line">			&amp;&amp; (!<span class="built_in">$past</span>(i_axi_reset_n))&amp;&amp;(!<span class="built_in">$past</span>(&amp;f_reset_length)))</span><br><span class="line">		`SLAVE_ASSUME(!i_axi_reset_n);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// If the reset is not generated within this particular core, then it</span></span><br><span class="line">	<span class="comment">// can be assumed if F_OPT_ASSUME_RESET is set</span></span><br><span class="line">	<span class="keyword">generate</span> <span class="keyword">if</span> (F_OPT_ASSUME_RESET &amp;&amp; !F_OPT_NO_RESET)</span><br><span class="line">	<span class="keyword">begin</span> : ASSUME_RESET</span><br><span class="line">		<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">		<span class="keyword">if</span> ((f_past_valid)&amp;&amp;(!<span class="built_in">$past</span>(i_axi_reset_n))&amp;&amp;(!<span class="built_in">$past</span>(&amp;f_reset_length)))</span><br><span class="line">			<span class="keyword">assume</span>(!i_axi_reset_n);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">always</span> @(*)</span><br><span class="line">		<span class="keyword">if</span> ((f_reset_length &gt; <span class="number">0</span>)&amp;&amp;(f_reset_length &lt; <span class="number">4&#x27;hf</span>))</span><br><span class="line">			<span class="keyword">assume</span>(!i_axi_reset_n);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">if</span> (!F_OPT_NO_RESET)</span><br><span class="line">	<span class="keyword">begin</span> : ASSERT_RESET</span><br><span class="line"></span><br><span class="line">		<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">		<span class="keyword">if</span> ((f_past_valid)&amp;&amp;(!<span class="built_in">$past</span>(i_axi_reset_n))&amp;&amp;(!<span class="built_in">$past</span>(&amp;f_reset_length)))</span><br><span class="line">			<span class="keyword">assert</span>(!i_axi_reset_n);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">always</span> @(*)</span><br><span class="line">		<span class="keyword">if</span> ((f_reset_length &gt; <span class="number">0</span>)&amp;&amp;(f_reset_length &lt; <span class="number">4&#x27;hf</span>))</span><br><span class="line">			<span class="keyword">assert</span>(!i_axi_reset_n);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">endgenerate</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// All of the xVALID signals *MUST* be set low on the clock following</span></span><br><span class="line">	<span class="comment">// a reset.  (See Fig A3-1) Not in the spec, but also checked here is</span></span><br><span class="line">	<span class="comment">// that they must also be set low initially.</span></span><br><span class="line">	<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">	<span class="keyword">if</span> ((!f_past_valid &amp;&amp; F_OPT_INITIAL)||(f_past_valid &amp;&amp; !<span class="built_in">$past</span>(i_axi_reset_n)))</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		`SLAVE_ASSUME(!i_axi_arvalid);</span><br><span class="line">		`SLAVE_ASSUME(!i_axi_awvalid);</span><br><span class="line">		`SLAVE_ASSUME(!i_axi_wvalid);</span><br><span class="line">		<span class="comment">//</span></span><br><span class="line">		`SLAVE_ASSERT(!i_axi_bvalid);</span><br><span class="line">		`SLAVE_ASSERT(!i_axi_rvalid);</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">generate</span> <span class="keyword">if</span> (OPT_ASYNC_RESET)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">always</span> @(*)</span><br><span class="line">		<span class="keyword">if</span> (!i_axi_reset_n)</span><br><span class="line">		<span class="keyword">begin</span></span><br><span class="line">			`SLAVE_ASSUME(!i_axi_arvalid);</span><br><span class="line">			`SLAVE_ASSUME(!i_axi_awvalid);</span><br><span class="line">			`SLAVE_ASSUME(!i_axi_wvalid);</span><br><span class="line">			<span class="comment">//</span></span><br><span class="line">			`SLAVE_ASSERT(!i_axi_bvalid);</span><br><span class="line">			`SLAVE_ASSERT(!i_axi_rvalid);</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">endgenerate</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Stability properties--what happens if valid and not ready</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Assume any response from the bus will not change prior to that</span></span><br><span class="line">	<span class="comment">// response being accepted</span></span><br><span class="line">	<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">	<span class="keyword">if</span> ((f_past_valid)&amp;&amp; <span class="built_in">$past</span>(i_axi_reset_n)</span><br><span class="line">		&amp;&amp; (!OPT_ASYNC_RESET || i_axi_reset_n))</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="comment">// Write address channel</span></span><br><span class="line">		<span class="keyword">if</span> ((f_past_valid)&amp;&amp;(<span class="built_in">$past</span>(i_axi_awvalid &amp;&amp; !i_axi_awready)))</span><br><span class="line">		<span class="keyword">begin</span></span><br><span class="line">			`SLAVE_ASSUME(i_axi_awvalid);</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_awaddr));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_awid));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_awlen));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_awsize));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_awburst));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_awlock));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_awcache));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_awprot));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_awqos));</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// Write data channel</span></span><br><span class="line">		<span class="keyword">if</span> ((f_past_valid)&amp;&amp;(<span class="built_in">$past</span>(i_axi_wvalid &amp;&amp; !i_axi_wready)))</span><br><span class="line">		<span class="keyword">begin</span></span><br><span class="line">			`SLAVE_ASSUME(i_axi_wvalid);</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_wstrb));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_wdata));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_wlast));</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// Incoming Read address channel</span></span><br><span class="line">		<span class="keyword">if</span> ((f_past_valid)&amp;&amp;(<span class="built_in">$past</span>(i_axi_arvalid &amp;&amp; !i_axi_arready)))</span><br><span class="line">		<span class="keyword">begin</span></span><br><span class="line">			`SLAVE_ASSUME(i_axi_arvalid);</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_arid));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_araddr));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_arlen));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_arsize));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_arburst));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_arlock));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_arcache));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_arprot));</span><br><span class="line">			`SLAVE_ASSUME(<span class="built_in">$stable</span>(i_axi_arqos));</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// Assume any response from the bus will not change prior to</span></span><br><span class="line">		<span class="comment">// that response being accepted</span></span><br><span class="line">		<span class="keyword">if</span> ((f_past_valid)&amp;&amp;(<span class="built_in">$past</span>(i_axi_rvalid &amp;&amp; !i_axi_rready)))</span><br><span class="line">		<span class="keyword">begin</span></span><br><span class="line">			`SLAVE_ASSERT(i_axi_rvalid);</span><br><span class="line">			`SLAVE_ASSERT(<span class="built_in">$stable</span>(i_axi_rid));</span><br><span class="line">			`SLAVE_ASSERT(<span class="built_in">$stable</span>(i_axi_rresp));</span><br><span class="line">			`SLAVE_ASSERT(<span class="built_in">$stable</span>(i_axi_rdata));</span><br><span class="line">			`SLAVE_ASSERT(<span class="built_in">$stable</span>(i_axi_rlast));</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> ((f_past_valid)&amp;&amp;(<span class="built_in">$past</span>(i_axi_bvalid &amp;&amp; !i_axi_bready)))</span><br><span class="line">		<span class="keyword">begin</span></span><br><span class="line">			`SLAVE_ASSERT(i_axi_bvalid);</span><br><span class="line">			`SLAVE_ASSERT(<span class="built_in">$stable</span>(i_axi_bid));</span><br><span class="line">			`SLAVE_ASSERT(<span class="built_in">$stable</span>(i_axi_bresp));</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Insist upon a maximum delay before a request is accepted</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">generate</span> <span class="keyword">if</span> (F_AXI_MAXWAIT &gt; <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">begin</span> : CHECK_STALL_COUNT</span><br><span class="line">		<span class="keyword">reg</span>	[(F_LGDEPTH-<span class="number">1</span>):<span class="number">0</span>]	f_axi_awstall,</span><br><span class="line">						f_axi_wstall,</span><br><span class="line">						f_axi_arstall;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//</span></span><br><span class="line">		<span class="comment">// AXI write address channel</span></span><br><span class="line">		<span class="comment">//</span></span><br><span class="line">		<span class="comment">// Count the number of times AWVALID is true while AWREADY</span></span><br><span class="line">		<span class="comment">// is false.  These are stalls, and we want to insist on a</span></span><br><span class="line">		<span class="comment">// minimum number of them.  However, if BVALID &amp;&amp; !BREADY,</span></span><br><span class="line">		<span class="comment">// then there&#x27;s a reason for not accepting anything more.</span></span><br><span class="line">		<span class="comment">// Similarly, many cores will only ever accept one request</span></span><br><span class="line">		<span class="comment">// at a time, hence we won&#x27;t count things as stalls if</span></span><br><span class="line">		<span class="comment">// WR-PENDING &gt; 0.</span></span><br><span class="line">		<span class="keyword">initial</span>	f_axi_awstall = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">		<span class="keyword">if</span> ((!i_axi_reset_n)||(!i_axi_awvalid)||(i_axi_awready)</span><br><span class="line">				||(f_axi_wr_pending &gt; <span class="number">0</span>))</span><br><span class="line">			f_axi_awstall &lt;= <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> ((!i_axi_bvalid)||(i_axi_bready))</span><br><span class="line">			f_axi_awstall &lt;= f_axi_awstall + <span class="number">1&#x27;b1</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">always</span> @(*)</span><br><span class="line">			`SLAVE_ASSERT(f_axi_awstall &lt; F_AXI_MAXWAIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//</span></span><br><span class="line">		<span class="comment">// AXI write data channel</span></span><br><span class="line">		<span class="comment">//</span></span><br><span class="line">		<span class="comment">// Count the number of clock cycles that the write data</span></span><br><span class="line">		<span class="comment">// channel is stalled, that is while WVALID &amp;&amp; !WREADY.</span></span><br><span class="line">		<span class="comment">// Since things can back up if BVALID &amp; !BREADY, we avoid</span></span><br><span class="line">		<span class="comment">// counting clock cycles in that circumstance</span></span><br><span class="line">		<span class="keyword">initial</span>	f_axi_wstall = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">		<span class="keyword">if</span> ((!i_axi_reset_n)||(!i_axi_wvalid)||(i_axi_wready)</span><br><span class="line">				||(f_axi_wr_pending == <span class="number">0</span> &amp;&amp; i_axi_wvalid))</span><br><span class="line">			f_axi_wstall &lt;= <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> ((!i_axi_bvalid)||(i_axi_bready))</span><br><span class="line">			f_axi_wstall &lt;= f_axi_wstall + <span class="number">1&#x27;b1</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">always</span> @(*)</span><br><span class="line">			`SLAVE_ASSERT(f_axi_wstall &lt; F_AXI_MAXWAIT);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//</span></span><br><span class="line">		<span class="comment">// AXI read address channel</span></span><br><span class="line">		<span class="comment">//</span></span><br><span class="line">		<span class="comment">// Similar to the first two above, once the master raises</span></span><br><span class="line">		<span class="comment">// ARVALID, insist that the slave respond within a minimum</span></span><br><span class="line">		<span class="comment">// number of clock cycles.  Exceptions include any time</span></span><br><span class="line">		<span class="comment">// RVALID is true, since that can back up the whole system,</span></span><br><span class="line">		<span class="comment">// and any time the number of bursts is greater than zero,</span></span><br><span class="line">		<span class="comment">// since many slaves can only accept one request at a time.</span></span><br><span class="line">		<span class="keyword">initial</span>	f_axi_arstall = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">		<span class="keyword">if</span> ((!i_axi_reset_n)||(!i_axi_arvalid)||(i_axi_arready)</span><br><span class="line">				||(i_axi_rvalid)||(f_axi_rd_nbursts &gt; <span class="number">0</span>))</span><br><span class="line">			f_axi_arstall &lt;= <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			f_axi_arstall &lt;= f_axi_arstall + <span class="number">1&#x27;b1</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">always</span> @(*)</span><br><span class="line">			`SLAVE_ASSERT(f_axi_arstall &lt; F_AXI_MAXWAIT);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">endgenerate</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Insist upon a maximum delay before any response is accepted</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// These are separate from the earlier ones, in case you wish to</span></span><br><span class="line">	<span class="comment">// control them separately.  For example, an interconnect might be</span></span><br><span class="line">	<span class="comment">// forced to let a channel wait indefinitely for access, but it might</span></span><br><span class="line">	<span class="comment">// not be appropriate to require the response to be able to wait</span></span><br><span class="line">	<span class="comment">// indefinitely as well</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">generate</span> <span class="keyword">if</span> (F_AXI_MAXRSTALL &gt; <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">begin</span> : CHECK_RESPONSE_STALLS</span><br><span class="line">		<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">		<span class="keyword">reg</span>	[(F_LGDEPTH-<span class="number">1</span>):<span class="number">0</span>]	f_axi_wvstall,</span><br><span class="line">						f_axi_bstall,</span><br><span class="line">						f_axi_rstall;</span><br><span class="line">		<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// f_axi_wvstall : AXI write channel valid</span></span><br><span class="line">		<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">		<span class="comment">// The first master stall check: guarantee that the master</span></span><br><span class="line">		<span class="comment">// provides the required write data in fairly short order,</span></span><br><span class="line">		<span class="comment">// and without much delay.  That is, once AWVALID &amp;&amp; AWREADY</span></span><br><span class="line">		<span class="comment">// are true, the slave needs to provide the W* values</span></span><br><span class="line">		<span class="keyword">initial</span>	f_axi_wvstall = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">		<span class="keyword">if</span> ((!i_axi_reset_n)||(i_axi_wvalid)</span><br><span class="line">				||(i_axi_bvalid &amp;&amp; !i_axi_bready)</span><br><span class="line">				||(f_axi_wr_pending == <span class="number">0</span>))</span><br><span class="line">			f_axi_wvstall &lt;= <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			f_axi_wvstall &lt;= f_axi_wvstall + <span class="number">1&#x27;b1</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">always</span> @(*)</span><br><span class="line">			`SLAVE_ASSUME(f_axi_wvstall &lt; F_AXI_MAXRSTALL);</span><br><span class="line">		<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// f_axi_bstall: AXI write response channel</span></span><br><span class="line">		<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">		<span class="comment">// Insist on a maximum number of clocks that BVALID can be</span></span><br><span class="line">		<span class="comment">// high while BREADY is low</span></span><br><span class="line">		<span class="keyword">initial</span>	f_axi_bstall = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">		<span class="keyword">if</span> ((!i_axi_reset_n)||(!i_axi_bvalid)||(i_axi_bready))</span><br><span class="line">			f_axi_bstall &lt;= <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			f_axi_bstall &lt;= f_axi_bstall + <span class="number">1&#x27;b1</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">always</span> @(*)</span><br><span class="line">			`SLAVE_ASSUME(f_axi_bstall &lt; F_AXI_MAXRSTALL);</span><br><span class="line">		<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// f_axi_rstall: AXI read response channel</span></span><br><span class="line">		<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">		<span class="comment">// Insist on a maximum number of clocks that RVALID can be</span></span><br><span class="line">		<span class="comment">// high while RREADY is low</span></span><br><span class="line">		<span class="keyword">initial</span>	f_axi_rstall = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">		<span class="keyword">if</span> ((!i_axi_reset_n)||(!i_axi_rvalid)||(i_axi_rready))</span><br><span class="line">			f_axi_rstall &lt;= <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			f_axi_rstall &lt;= f_axi_rstall + <span class="number">1&#x27;b1</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">always</span> @(*)</span><br><span class="line">			`SLAVE_ASSUME(f_axi_rstall &lt; F_AXI_MAXRSTALL);</span><br><span class="line">		<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">endgenerate</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Count outstanding transactions.</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// With these measures, we count once per any burst.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		f_axi_wr_checkid = r_axi_wr_checkid;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// f_axi_wr_pending, f_axi_wr_ckvalid</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">initial</span>	f_axi_wr_pending = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">initial</span>	f_axi_wr_ckvalid = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">	<span class="keyword">if</span> (!i_axi_reset_n)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		f_axi_wr_pending &lt;= <span class="number">0</span>;</span><br><span class="line">		f_axi_wr_ckvalid &lt;= <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">case</span>(&#123; axi_awr_req, axi_wr_req &#125;)</span><br><span class="line">	<span class="number">2&#x27;b10</span>: <span class="keyword">begin</span></span><br><span class="line">		<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">		f_axi_wr_pending &lt;= i_axi_awlen+<span class="number">1</span>;</span><br><span class="line">		f_axi_wr_ckvalid &lt;= (i_axi_awid == f_axi_wr_checkid);</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">		<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="number">2&#x27;b01</span>: <span class="keyword">begin</span></span><br><span class="line">		<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">		`SLAVE_ASSUME(f_axi_wr_pending &gt; <span class="number">0</span>);</span><br><span class="line">		f_axi_wr_pending &lt;= f_axi_wr_pending - <span class="number">1&#x27;b1</span>;</span><br><span class="line">		`SLAVE_ASSUME(!i_axi_wlast || (f_axi_wr_pending == <span class="number">1</span>));</span><br><span class="line">		<span class="keyword">if</span> (i_axi_wlast)</span><br><span class="line">			f_axi_wr_ckvalid &lt;= <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">		<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="number">2&#x27;b11</span>: <span class="keyword">begin</span></span><br><span class="line">		<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">		f_axi_wr_ckvalid &lt;= (i_axi_awid == f_axi_wr_checkid);</span><br><span class="line">		<span class="keyword">if</span> (f_axi_wr_pending &gt; <span class="number">0</span>)</span><br><span class="line">			f_axi_wr_pending &lt;= i_axi_awlen+<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">			f_axi_wr_pending &lt;= &#123; <span class="number">1&#x27;b0</span>, i_axi_awlen &#125;;</span><br><span class="line">			<span class="keyword">if</span> (i_axi_awlen == <span class="number">0</span>)</span><br><span class="line">				f_axi_wr_ckvalid &lt;= <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">end</span> <span class="keyword">end</span></span><br><span class="line">		<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="keyword">default</span>: <span class="keyword">begin</span> <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">endcase</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (f_axi_wr_ckvalid)</span><br><span class="line">		<span class="keyword">assert</span>((f_axi_wrid_nbursts &gt; <span class="number">0</span>)&amp;&amp;(f_axi_wr_pending &gt; <span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">	<span class="comment">// assertions on f_axi_wr_pending, wlast</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="comment">// Insist that no WVALID value show up prior to a AWVALID value.  The</span></span><br><span class="line">	<span class="comment">// address *MUST* come first.  Further, while waiting for the write</span></span><br><span class="line">	<span class="comment">// data, NO OTHER WRITE ADDRESS may be permitted.  This is not strictly</span></span><br><span class="line">	<span class="comment">// required by the specification, but it is required in order to make</span></span><br><span class="line">	<span class="comment">// these properties work (currently--I might revisit this later)</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (F_OPT_INITIAL || f_past_valid)</span><br><span class="line">	<span class="keyword">case</span>(&#123;i_axi_awvalid, i_axi_wvalid&#125;)</span><br><span class="line">		<span class="comment">// If AWVALID is true but not WVALID, then no other write</span></span><br><span class="line">		<span class="comment">// requests shall be pending.  This makes certain that the</span></span><br><span class="line">		<span class="comment">// new address doesn&#x27;t get mixed up with any prior responses</span></span><br><span class="line">		<span class="comment">// from the slave</span></span><br><span class="line">	<span class="number">2&#x27;b10</span>: `SLAVE_ASSUME(f_axi_wr_pending == <span class="number">0</span>);</span><br><span class="line">	<span class="number">2&#x27;b01</span>: <span class="keyword">begin</span></span><br><span class="line">		<span class="comment">// On the other hand, if WVALID is true but not AWVALID,</span></span><br><span class="line">		<span class="comment">// then we only need to double check that there&#x27;s at least</span></span><br><span class="line">		<span class="comment">// one pending value to be returned.  If this is the last value,</span></span><br><span class="line">		<span class="comment">// make certain that it is so marked.</span></span><br><span class="line">		`SLAVE_ASSUME(f_axi_wr_pending &gt; <span class="number">0</span>);</span><br><span class="line">		`SLAVE_ASSUME(i_axi_wlast == (f_axi_wr_pending == <span class="number">1</span>));</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="number">2&#x27;b11</span>: <span class="keyword">begin</span></span><br><span class="line">		<span class="comment">// If both AWVALID and WVALID, then we have two cases to</span></span><br><span class="line">		<span class="comment">// consider.  The first case is that the WVALID applies to the</span></span><br><span class="line">		<span class="comment">// last item of the previous burst.  Otherwise, it could be</span></span><br><span class="line">		<span class="comment">// the data associated with this new burst described by AW*</span></span><br><span class="line">		<span class="keyword">if</span> (f_axi_wr_pending &gt; <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">begin</span> <span class="comment">// Write word applies to the last burst</span></span><br><span class="line">			`SLAVE_ASSUME(f_axi_wr_pending == <span class="number">1</span>);</span><br><span class="line">			`SLAVE_ASSUME(i_axi_wlast);</span><br><span class="line">			`SLAVE_ASSERT(!i_axi_awready || i_axi_wready);</span><br><span class="line">		<span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">			<span class="comment">// Must be associated with the new burst</span></span><br><span class="line">			<span class="comment">// In this case, check WLAST against the *incoming*</span></span><br><span class="line">			<span class="comment">// address request</span></span><br><span class="line">			`SLAVE_ASSUME(i_axi_wlast == (i_axi_awlen == <span class="number">0</span>));</span><br><span class="line">		<span class="keyword">end</span> <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">default</span>: <span class="keyword">begin</span> <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">endcase</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// f_axi_awr_nbursts</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="comment">// Count the number of outstanding BVALID&#x27;s to expect</span></span><br><span class="line">	<span class="keyword">initial</span>	f_axi_awr_nbursts = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">	<span class="keyword">if</span> (!i_axi_reset_n)</span><br><span class="line">		f_axi_awr_nbursts &lt;= <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">case</span>(&#123; (axi_awr_req), (axi_wr_ack) &#125;)</span><br><span class="line">	<span class="number">2&#x27;b10</span>: f_axi_awr_nbursts &lt;= f_axi_awr_nbursts + <span class="number">1&#x27;b1</span>;</span><br><span class="line">	<span class="number">2&#x27;b01</span>: f_axi_awr_nbursts &lt;= f_axi_awr_nbursts - <span class="number">1&#x27;b1</span>;</span><br><span class="line">	<span class="keyword">default</span>: <span class="keyword">begin</span> <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">endcase</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// f_axi_wrid_nbursts</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="comment">// Count the number of outstanding BVALID&#x27;s to expect associated with</span></span><br><span class="line">	<span class="comment">// our choice of check ID.  That is, we check one channel alone for</span></span><br><span class="line">	<span class="comment">// proper ordering, and this is the count of the channel we have</span></span><br><span class="line">	<span class="comment">// chosen</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">initial</span>	f_axi_wrid_nbursts = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">	<span class="keyword">if</span> (!i_axi_reset_n)</span><br><span class="line">		f_axi_wrid_nbursts &lt;= <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">case</span>(&#123; (axi_awr_req)&amp;&amp;(i_axi_awid==f_axi_wr_checkid),</span><br><span class="line">			(axi_wr_ack)&amp;&amp;(i_axi_bid == f_axi_wr_checkid) &#125;)</span><br><span class="line">	<span class="number">2&#x27;b10</span>: f_axi_wrid_nbursts &lt;= f_axi_wrid_nbursts + <span class="number">1&#x27;b1</span>;</span><br><span class="line">	<span class="number">2&#x27;b01</span>: f_axi_wrid_nbursts &lt;= f_axi_wrid_nbursts - <span class="number">1&#x27;b1</span>;</span><br><span class="line">	<span class="keyword">default</span>: <span class="keyword">begin</span> <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">endcase</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// f_axi_rd_nbursts</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="comment">// Count the number of reads bursts outstanding.  This defines the</span></span><br><span class="line">	<span class="comment">// number of RDVALID &amp;&amp; RLAST&#x27;s we expect to see before becoming idle</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">initial</span>	f_axi_rd_nbursts = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">	<span class="keyword">if</span> (!i_axi_reset_n)</span><br><span class="line">		f_axi_rd_nbursts &lt;= <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">case</span>(&#123; (axi_ard_req), (axi_rd_ack)&amp;&amp;(i_axi_rlast) &#125;)</span><br><span class="line">	<span class="number">2&#x27;b01</span>: f_axi_rd_nbursts &lt;= f_axi_rd_nbursts - <span class="number">1&#x27;b1</span>;</span><br><span class="line">	<span class="number">2&#x27;b10</span>: f_axi_rd_nbursts &lt;= f_axi_rd_nbursts + <span class="number">1&#x27;b1</span>;</span><br><span class="line">	<span class="keyword">default</span>: <span class="keyword">begin</span> <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">endcase</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// f_axi_rd_outstanding</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="comment">// f_axi_rd_outstanding counts the number of RDVALID&#x27;s we expect to</span></span><br><span class="line">	<span class="comment">// see before becoming idle.  This must always be greater than or</span></span><br><span class="line">	<span class="comment">// equal to the number of RVALID &amp; RLAST&#x27;s counted above</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">initial</span>	f_axi_rd_outstanding = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">	<span class="keyword">if</span> (!i_axi_reset_n)</span><br><span class="line">		f_axi_rd_outstanding &lt;= <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">case</span>(&#123; (axi_ard_req), (axi_rd_ack) &#125;)</span><br><span class="line">	<span class="comment">// Verilator lint_off WIDTH</span></span><br><span class="line">	<span class="number">2&#x27;b01</span>: f_axi_rd_outstanding &lt;= f_axi_rd_outstanding - <span class="number">1&#x27;b1</span>;</span><br><span class="line">	<span class="number">2&#x27;b10</span>: f_axi_rd_outstanding &lt;= f_axi_rd_outstanding + i_axi_arlen+<span class="number">1</span>;</span><br><span class="line">	<span class="number">2&#x27;b11</span>: f_axi_rd_outstanding &lt;= f_axi_rd_outstanding + i_axi_arlen;</span><br><span class="line">	<span class="comment">// Verilator lint_on  WIDTH</span></span><br><span class="line">	<span class="keyword">default</span>: <span class="keyword">begin</span> <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">endcase</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Overflow checking</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="comment">// Do not let the number of outstanding requests overflow.  This is</span></span><br><span class="line">	<span class="comment">// a responsibility of the master to never allow 2^F_LGDEPTH-1</span></span><br><span class="line">	<span class="comment">// requests to be outstanding.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		`SLAVE_ASSERT(f_axi_rd_outstanding  &lt; &#123;(F_LGDEPTH)&#123;<span class="number">1&#x27;b1</span>&#125;&#125;);</span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		`SLAVE_ASSERT(f_axi_awr_nbursts &lt; &#123;(F_LGDEPTH)&#123;<span class="number">1&#x27;b1</span>&#125;&#125;);</span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		`SLAVE_ASSERT(f_axi_wr_pending &lt;= <span class="number">256</span>);</span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		`SLAVE_ASSERT(f_axi_rd_nbursts  &lt; &#123;(F_LGDEPTH)&#123;<span class="number">1&#x27;b1</span>&#125;&#125;);</span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Read Burst counting</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		f_axi_rd_checkid = r_axi_rd_checkid;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// rdid_nbursts, rdid_outstanding</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">initial</span>	f_axi_rdid_nbursts = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">initial</span>	f_axi_rdid_outstanding = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">	<span class="keyword">if</span> (!i_axi_reset_n)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		f_axi_rdid_nbursts &lt;= <span class="number">0</span>;</span><br><span class="line">		f_axi_rdid_outstanding &lt;= <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">case</span>(&#123;	(i_axi_arvalid&amp;&amp; i_axi_arready&amp;&amp;</span><br><span class="line">				(i_axi_arid == f_axi_rd_checkid)),</span><br><span class="line">			(i_axi_rvalid &amp;&amp; i_axi_rready &amp;&amp;</span><br><span class="line">				(i_axi_rid == f_axi_rd_checkid)) &#125;)</span><br><span class="line">	<span class="comment">// Verilator lint_off WIDTH</span></span><br><span class="line">	<span class="number">2&#x27;b01</span>: <span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">if</span> (i_axi_rlast)</span><br><span class="line">			f_axi_rdid_nbursts &lt;= f_axi_rdid_nbursts - <span class="number">1</span>;</span><br><span class="line">		f_axi_rdid_outstanding &lt;= f_axi_rdid_outstanding - <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="number">2&#x27;b10</span>: <span class="keyword">begin</span></span><br><span class="line">		f_axi_rdid_nbursts &lt;= f_axi_rdid_nbursts + <span class="number">1</span>;</span><br><span class="line">		f_axi_rdid_outstanding &lt;= f_axi_rdid_outstanding+i_axi_arlen+ <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="number">2&#x27;b11</span>: <span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">if</span> (!i_axi_rlast)</span><br><span class="line">			f_axi_rdid_nbursts &lt;= f_axi_rdid_nbursts + <span class="number">1</span>;</span><br><span class="line">		f_axi_rdid_outstanding &lt;= f_axi_rdid_outstanding + i_axi_arlen;</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="comment">// Verilator lint_on  WIDTH</span></span><br><span class="line">	<span class="keyword">default</span>: <span class="keyword">begin</span> <span class="keyword">end</span></span><br><span class="line">	<span class="keyword">endcase</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		<span class="keyword">assert</span>(f_axi_rd_nbursts &lt;= f_axi_rd_outstanding);</span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		<span class="keyword">assert</span>((f_axi_rd_nbursts == <span class="number">0</span>)==(f_axi_rd_outstanding==<span class="number">0</span>));</span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		<span class="keyword">assert</span>(f_axi_rdid_nbursts &lt;= f_axi_rd_nbursts);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (f_axi_rdid_nbursts == f_axi_rd_nbursts)</span><br><span class="line">		<span class="keyword">assert</span>(f_axi_rdid_outstanding == f_axi_rd_outstanding);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		<span class="keyword">assert</span>(f_axi_rdid_outstanding &lt;= f_axi_rd_outstanding);</span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		<span class="keyword">assert</span>(f_axi_rdid_nbursts &lt;= f_axi_rdid_outstanding);</span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		<span class="keyword">assert</span>(f_axi_rd_nbursts - f_axi_rdid_nbursts</span><br><span class="line">				&lt;= f_axi_rd_outstanding - f_axi_rdid_outstanding);</span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		<span class="keyword">assert</span>((f_axi_rdid_nbursts == <span class="number">0</span>)==(f_axi_rdid_outstanding==<span class="number">0</span>));</span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		<span class="keyword">assert</span>((f_axi_rdid_nbursts == f_axi_rd_nbursts)</span><br><span class="line">			== (f_axi_rdid_outstanding == f_axi_rd_outstanding));</span><br><span class="line">	<span class="comment">// ///////</span></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (f_axi_rd_ckvalid)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">assert</span>(f_axi_rdid_nbursts &gt;= f_axi_rdid_ckign_nbursts+<span class="number">1</span>);</span><br><span class="line">		<span class="keyword">if</span> (f_axi_rdid_ckign_nbursts+<span class="number">1</span> == f_axi_rdid_nbursts)</span><br><span class="line">			<span class="keyword">assert</span>(f_axi_rdid_outstanding</span><br><span class="line">				== f_axi_rdid_ckign_outstanding+f_axi_rd_cklen);</span><br><span class="line">		<span class="keyword">assert</span>(f_axi_rdid_outstanding &gt;=</span><br><span class="line">			f_axi_rdid_ckign_outstanding</span><br><span class="line">			+ f_axi_rd_cklen</span><br><span class="line">			+ (f_axi_rdid_nbursts-(f_axi_rdid_ckign_nbursts+<span class="number">1</span>)));</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// AXI read data channel signals</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (i_axi_rvalid &amp;&amp; (F_OPT_INITIAL || f_past_valid))</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		`SLAVE_ASSERT(f_axi_rd_outstanding &gt; <span class="number">0</span>);</span><br><span class="line">		`SLAVE_ASSERT(f_axi_rd_nbursts &gt; <span class="number">0</span>);</span><br><span class="line">		<span class="keyword">if</span> (f_axi_rd_checkid == i_axi_rid)</span><br><span class="line">		<span class="keyword">begin</span></span><br><span class="line">			`SLAVE_ASSERT(f_axi_rdid_nbursts &gt; <span class="number">0</span>);</span><br><span class="line">			`SLAVE_ASSERT(f_axi_rdid_outstanding &gt; <span class="number">0</span>);</span><br><span class="line">			<span class="keyword">if</span> (f_axi_rd_ckvalid)</span><br><span class="line">			<span class="keyword">begin</span></span><br><span class="line">				<span class="keyword">if</span> (f_axi_rdid_ckign_nbursts &gt; <span class="number">0</span>)</span><br><span class="line">				<span class="keyword">begin</span></span><br><span class="line">					`SLAVE_ASSERT((f_axi_rdid_ckign_nbursts != <span class="number">1</span>)</span><br><span class="line">						||(i_axi_rlast == (f_axi_rdid_ckign_outstanding==<span class="number">1</span>)));</span><br><span class="line">				<span class="keyword">end</span></span><br><span class="line">			<span class="keyword">end</span></span><br><span class="line">		<span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">			`SLAVE_ASSERT(f_axi_rd_nbursts &gt; f_axi_rdid_nbursts);</span><br><span class="line">			`SLAVE_ASSERT(f_axi_rd_outstanding</span><br><span class="line">					&gt;  f_axi_rdid_outstanding);</span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// next_rd* checking</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (!F_OPT_INITIAL &amp;&amp; !f_past_valid)</span><br><span class="line">		next_rd_nbursts = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		next_rd_nbursts = f_axi_rd_nbursts</span><br><span class="line">				- (i_axi_rvalid &amp;&amp; i_axi_rlast ? <span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (!F_OPT_INITIAL &amp;&amp; !f_past_valid)</span><br><span class="line">		next_rd_outstanding = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		next_rd_outstanding = f_axi_rd_outstanding</span><br><span class="line">				- (i_axi_rvalid ? <span class="number">1</span>:<span class="number">00</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (!F_OPT_INITIAL &amp;&amp; !f_past_valid)</span><br><span class="line">		next_rdid_nbursts = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		next_rdid_nbursts = f_axi_rdid_nbursts</span><br><span class="line">			-((i_axi_rvalid &amp;&amp; i_axi_rlast</span><br><span class="line">				&amp;&amp;(i_axi_rid == f_axi_rd_checkid)) ? <span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (!F_OPT_INITIAL &amp;&amp; !f_past_valid)</span><br><span class="line">		next_rdid_outstanding = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		next_rdid_outstanding = f_axi_rdid_outstanding</span><br><span class="line">		    - ((i_axi_rvalid &amp;&amp; i_axi_rid == f_axi_rd_checkid) ? <span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (!F_OPT_INITIAL &amp;&amp; !f_past_valid)</span><br><span class="line">		next_rdno_nbursts = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		next_rdno_nbursts = f_axi_rd_nbursts - f_axi_rdid_nbursts</span><br><span class="line">			-((i_axi_rvalid &amp;&amp; i_axi_rlast</span><br><span class="line">				&amp;&amp;(i_axi_rid != f_axi_rd_checkid)) ? <span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (!F_OPT_INITIAL &amp;&amp; !f_past_valid)</span><br><span class="line">		next_rdno_outstanding = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		next_rdno_outstanding = f_axi_rd_outstanding - f_axi_rdid_outstanding</span><br><span class="line">		    - ((i_axi_rvalid &amp;&amp; i_axi_rid != f_axi_rd_checkid) ? <span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (!F_OPT_INITIAL &amp;&amp; !f_past_valid)</span><br><span class="line">		next_rdign_nbursts = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">		next_rdign_nbursts = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span> (f_axi_rd_ckvalid &amp;&amp; next_rdign_nbursts &gt; <span class="number">0</span>)</span><br><span class="line">			next_rdign_nbursts = f_axi_rdid_ckign_nbursts</span><br><span class="line">				-((i_axi_rvalid &amp;&amp; i_axi_rlast</span><br><span class="line">					&amp;&amp;(i_axi_rid == f_axi_rd_checkid)) ? <span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (!F_OPT_INITIAL &amp;&amp; !f_past_valid)</span><br><span class="line">		next_rdign_outstanding = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">		next_rdign_outstanding = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span> (f_axi_rd_ckvalid &amp;&amp; next_rdign_outstanding &gt; <span class="number">0</span>)</span><br><span class="line">			next_rdign_outstanding = f_axi_rdid_ckign_outstanding</span><br><span class="line">				-((i_axi_rvalid</span><br><span class="line">					&amp;&amp;(i_axi_rid == f_axi_rd_checkid)) ? <span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		`SLAVE_ASSERT(next_rd_nbursts   &lt;= next_rd_outstanding);</span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		`SLAVE_ASSERT(next_rdid_nbursts &lt;= next_rdid_outstanding);</span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		`SLAVE_ASSERT(next_rdno_nbursts &lt;= next_rdno_outstanding);</span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (next_rdign_nbursts &gt; <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		`SLAVE_ASSERT(next_rdid_nbursts &gt;= next_rdign_nbursts + <span class="number">1</span>);</span><br><span class="line">		`SLAVE_ASSERT(next_rdid_nbursts &lt;= next_rdid_outstanding - next_rdign_outstanding - f_axi_rd_cklen);</span><br><span class="line">		`SLAVE_ASSERT(next_rdid_outstanding &gt;= next_rdign_outstanding + f_axi_rd_cklen);</span><br><span class="line">		`SLAVE_ASSERT(next_rdign_nbursts &lt;= next_rdign_outstanding);</span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">if</span> (f_axi_rd_cklen &gt; <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		`SLAVE_ASSERT(next_rdid_nbursts &gt;= ((i_axi_rvalid &amp; i_axi_rlast)?<span class="number">0</span>:<span class="number">1</span>));</span><br><span class="line">		`SLAVE_ASSERT(next_rdid_outstanding &gt;= (f_axi_rd_cklen-<span class="number">1</span>) + f_axi_rdid_nbursts - <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		`SLAVE_ASSERT(&#123; <span class="number">8&#x27;h00</span>, next_rd_outstanding &#125;</span><br><span class="line">				&lt;= &#123; next_rd_nbursts, <span class="number">8&#x27;h00</span> &#125;);</span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		`SLAVE_ASSERT(&#123; <span class="number">8&#x27;h00</span>, next_rdid_outstanding &#125;</span><br><span class="line">				&lt;= &#123; next_rdid_nbursts, <span class="number">8&#x27;h00</span> &#125;);</span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		`SLAVE_ASSERT(&#123; <span class="number">8&#x27;h00</span>, next_rdno_outstanding &#125;</span><br><span class="line">				&lt;= &#123; next_rdno_nbursts, <span class="number">8&#x27;h00</span> &#125;);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (f_axi_rd_ckvalid &amp;&amp; f_axi_rdid_ckign_nbursts &gt; <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">if</span> (!i_axi_rvalid || !i_axi_rlast)</span><br><span class="line">		<span class="keyword">begin</span></span><br><span class="line">			`SLAVE_ASSERT(next_rdid_nbursts &gt;= f_axi_rdid_ckign_nbursts + <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">end</span> <span class="keyword">else</span></span><br><span class="line">			`SLAVE_ASSERT(next_rdid_nbursts &gt;= f_axi_rdid_ckign_nbursts);</span><br><span class="line"></span><br><span class="line">		`SLAVE_ASSERT(next_rdid_outstanding &gt;= f_axi_rdid_ckign_outstanding + f_axi_rd_cklen - (i_axi_rvalid ? <span class="number">1</span>:<span class="number">0</span>));</span><br><span class="line">		`SLAVE_ASSERT(f_axi_rdid_ckign_outstanding &gt;= f_axi_rdid_ckign_nbursts);</span><br><span class="line">		`SLAVE_ASSERT(&#123; next_rdign_nbursts, <span class="number">8&#x27;h00</span> &#125; &gt;= &#123; <span class="number">8&#x27;h00</span>, next_rdign_outstanding &#125;);</span><br><span class="line">		<span class="keyword">if</span> (f_axi_rdid_ckign_outstanding == <span class="number">1</span> &amp;&amp; i_axi_rvalid &amp;&amp; i_axi_rid == f_axi_rd_checkid)</span><br><span class="line">			`SLAVE_ASSERT(i_axi_rlast);</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		<span class="keyword">assert</span>(&#123; <span class="number">8&#x27;h00</span>, f_axi_rd_outstanding &#125; &lt;= &#123; f_axi_rd_nbursts, <span class="number">8&#x27;h0</span> &#125;);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (i_axi_rvalid &amp;&amp; f_axi_rd_ckvalid &amp;&amp; (f_past_valid || F_OPT_INITIAL))</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		<span class="keyword">if</span> (f_axi_rd_checkid == i_axi_rid)</span><br><span class="line">		<span class="keyword">begin</span></span><br><span class="line">			<span class="keyword">if</span> (f_axi_rdid_ckign_nbursts &gt; <span class="number">0</span>)</span><br><span class="line">			<span class="keyword">begin</span></span><br><span class="line">			`SLAVE_ASSERT(next_rdid_nbursts &gt;= f_axi_rdid_ckign_nbursts);</span><br><span class="line">			<span class="keyword">if</span> (f_axi_rdid_ckign_outstanding == f_axi_rdid_ckign_nbursts)</span><br><span class="line">				`SLAVE_ASSERT(i_axi_rlast);</span><br><span class="line">			<span class="keyword">end</span> <span class="keyword">else</span></span><br><span class="line">				`SLAVE_ASSERT(i_axi_rlast == (f_axi_rd_cklen == <span class="number">1</span>));</span><br><span class="line">		<span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line"></span><br><span class="line">		`SLAVE_ASSERT(f_axi_rdid_outstanding</span><br><span class="line">			- f_axi_rdid_ckign_outstanding</span><br><span class="line">			- f_axi_rd_cklen &gt;=</span><br><span class="line">			(f_axi_rdid_nbursts-f_axi_rdid_ckign_nbursts-<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">		<span class="keyword">end</span></span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Minimum delay to acknowledgment</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Insist that all responses are returned in less than a maximum delay</span></span><br><span class="line">	<span class="comment">// In this case, we count responses within a burst, rather than entire</span></span><br><span class="line">	<span class="comment">// bursts.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// A unique feature to the backpressure mechanism within AXI is that</span></span><br><span class="line">	<span class="comment">// we have to reset our delay counters in the case of any push back,</span></span><br><span class="line">	<span class="comment">// since the response can&#x27;t move forward if the master isn&#x27;t (yet)</span></span><br><span class="line">	<span class="comment">// ready for it.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">generate</span> <span class="keyword">if</span> (F_AXI_MAXDELAY &gt; <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">begin</span> : CHECK_MAX_DELAY</span><br><span class="line"></span><br><span class="line">		<span class="keyword">reg</span>	[(F_LGDEPTH-<span class="number">1</span>):<span class="number">0</span>]	f_axi_awr_ack_delay,</span><br><span class="line">						f_axi_rd_ack_delay;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// awr_ack_delay</span></span><br><span class="line">		<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">		<span class="keyword">initial</span>	f_axi_awr_ack_delay = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">		<span class="keyword">if</span> ((!i_axi_reset_n)||(i_axi_bvalid)||(i_axi_wvalid)</span><br><span class="line">					||((f_axi_awr_nbursts == <span class="number">1</span>)</span><br><span class="line">						&amp;&amp;(f_axi_wr_pending&gt;<span class="number">0</span>))</span><br><span class="line">					||(f_axi_awr_nbursts == <span class="number">0</span>))</span><br><span class="line">			f_axi_awr_ack_delay &lt;= <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			f_axi_awr_ack_delay &lt;= f_axi_awr_ack_delay + <span class="number">1&#x27;b1</span>;</span><br><span class="line">		<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// rd_ack_delay</span></span><br><span class="line">		<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">		<span class="keyword">initial</span>	f_axi_rd_ack_delay = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">always</span> @(<span class="keyword">posedge</span> i_clk)</span><br><span class="line">		<span class="keyword">if</span> ((!i_axi_reset_n)||(i_axi_rvalid)||(f_axi_rd_outstanding==<span class="number">0</span>))</span><br><span class="line">			f_axi_rd_ack_delay &lt;= <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			f_axi_rd_ack_delay &lt;= f_axi_rd_ack_delay + <span class="number">1&#x27;b1</span>;</span><br><span class="line">		<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">always</span> @(*)</span><br><span class="line">			`SLAVE_ASSERT(f_axi_awr_ack_delay &lt; F_AXI_MAXDELAY);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">always</span> @(*)</span><br><span class="line">			`SLAVE_ASSERT(f_axi_rd_ack_delay &lt; F_AXI_MAXDELAY);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">endgenerate</span></span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Acknowledgements must follow requests</span></span><br><span class="line">	<span class="comment">// &#123;&#123;&#123;</span></span><br><span class="line">	<span class="comment">////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// The outstanding count is a count of bursts, but the acknowledgements</span></span><br><span class="line">	<span class="comment">// we are looking for are individual.  Hence, there should be no</span></span><br><span class="line">	<span class="comment">// individual acknowledgements coming back if there&#x27;s no outstanding</span></span><br><span class="line">	<span class="comment">// burst.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// AXI write response channel</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		f_wr_completed = f_axi_awr_nbursts-((f_axi_wr_pending&gt;<span class="number">0</span>) ? <span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line">		f_wrid_completed = f_axi_wrid_nbursts</span><br><span class="line">				- (f_axi_wr_ckvalid ? <span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">assert</span>(f_axi_wrid_nbursts &lt;= f_axi_awr_nbursts);</span><br><span class="line">		<span class="keyword">assert</span>(f_wrid_completed &lt;= f_wr_completed);</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (i_axi_bvalid &amp;&amp; (f_past_valid || F_OPT_INITIAL))</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		`SLAVE_ASSERT(f_wr_completed &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (i_axi_bid == f_axi_wr_checkid)</span><br><span class="line">		<span class="keyword">begin</span></span><br><span class="line">			`SLAVE_ASSERT(f_wrid_completed &gt; <span class="number">0</span>);</span><br><span class="line">		<span class="keyword">end</span> <span class="keyword">else</span> <span class="comment">// if (i_axi_bid != f_axi_wr_checkid)</span></span><br><span class="line">			`SLAVE_ASSERT(f_wr_completed - f_wrid_completed &gt; <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Cannot have outstanding values if there aren&#x27;t any outstanding</span></span><br><span class="line">	<span class="comment">// bursts</span></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">		<span class="keyword">assert</span>(f_axi_wrid_nbursts &lt;= f_axi_awr_nbursts);</span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (f_axi_awr_nbursts == <span class="number">0</span>)</span><br><span class="line">		`SLAVE_ASSERT(f_axi_wr_pending == <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (f_axi_wr_pending == <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">assert</span>(f_axi_wr_ckvalid == <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Because we can&#x27;t accept multiple AW* requests prior to the</span></span><br><span class="line">	<span class="comment">// last WVALID &amp;&amp; WLAST, the AWREADY signal *MUST* be high while</span></span><br><span class="line">	<span class="comment">// waiting</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="keyword">always</span> @(*)</span><br><span class="line">	<span class="keyword">if</span> (f_axi_wr_pending &gt; <span class="number">1</span>)</span><br><span class="line">		`SLAVE_ASSERT(!i_axi_awready);</span><br><span class="line">	<span class="comment">// &#125;&#125;&#125;</span></span><br></pre></td></tr></table></figure>















</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://more_study@163.com">冰蒂斯</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://more_study@163.com/2023/11/29/axi-master-fullmid/">http://more_study@163.com/2023/11/29/axi-master-fullmid/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://more_study@163.com" target="_blank">冰蒂斯のformula</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/AXI/">AXI</a><a class="post-meta__tags" href="/tags/master/">master</a><a class="post-meta__tags" href="/tags/property/">property</a></div><div class="post_share"><div class="social-share" data-image="/img/chainsaw_makima04.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/12/03/axi-master-fulllast/" title="axi_(full)master(下)"><img class="cover" src="/img/chainsaw_makima04.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">axi_(full)master(下)</div></div></a></div><div class="next-post pull-right"><a href="/2023/11/27/formal-wstrb/" title="formal_wstrb"><img class="cover" src="/img/chainsaw_red.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">formal_wstrb</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/12/03/axi-master-fulllast/" title="axi_(full)master(下)"><img class="cover" src="/img/chainsaw_makima04.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-03</div><div class="title">axi_(full)master(下)</div></div></a></div><div><a href="/2023/11/23/5-1-2-basic-master/" title="5-1 basic_master(下)"><img class="cover" src="/img/chainsaw_makima04.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-23</div><div class="title">5-1 basic_master(下)</div></div></a></div><div><a href="/2023/11/15/5-1-1-basic-master/" title="5-1 basic_master(中)"><img class="cover" src="/img/chainsaw_makima04.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-15</div><div class="title">5-1 basic_master(中)</div></div></a></div><div><a href="/2023/11/13/5-1-basic-master/" title="5-1 basic_master(上)"><img class="cover" src="/img/chainsaw_makima04.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-13</div><div class="title">5-1 basic_master(上)</div></div></a></div><div><a href="/2023/11/18/Property-master/" title="Property_axil-master"><img class="cover" src="/img/chainsaw_makima04.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-18</div><div class="title">Property_axil-master</div></div></a></div><div><a href="/2023/12/06/MM2S/" title="MM2S"><img class="cover" src="/img/chainsaw_red.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-06</div><div class="title">MM2S</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/head.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">冰蒂斯</div><div class="author-info__description">螺旋上升的人生,也是多线程的人生</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="/more_study@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-W-addr-checking"><span class="toc-number">1.</span> <span class="toc-text">1. W addr checking</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E9%87%8D%E8%A6%81%E5%89%8D%E8%A8%80"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 重要前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-Get-initial-signal-the-FORMAL-need"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 Get initial signal the FORMAL need</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-choose-SIZ%E2%80%94%E2%80%94%E2%80%94-waiting"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 choose  SIZ———-waiting</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-next-address"><span class="toc-number">1.4.</span> <span class="toc-text">1.4 next address</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-f-axi-wr-addr"><span class="toc-number">1.5.</span> <span class="toc-text">1.5  f_axi_wr_addr</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-register-axi-wr-addr"><span class="toc-number">1.5.1.</span> <span class="toc-text">1.register_axi_wr_addr</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-get-f-addr"><span class="toc-number">1.5.2.</span> <span class="toc-text">2. get  f_addr</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-W-channel-validate"><span class="toc-number">2.</span> <span class="toc-text">2.W channel validate</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-wraddr-validate"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 wraddr_validate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-wstrb-validate"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 wstrb_validate</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-write-induction-property"><span class="toc-number">3.</span> <span class="toc-text">3. write induction property</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-wraddr-valpending"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 wraddr  valpending</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-check-length-of-burst"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 check length of  burst</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-R-addr-checking"><span class="toc-number">4.</span> <span class="toc-text">4. R addr checking</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-Register"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 Register</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-check"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 check</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-rd-pending-%EF%BC%88UNUSED%EF%BC%89"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 rd_pending （UNUSED）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-get-initial-signals-FORMAL-need"><span class="toc-number">4.4.</span> <span class="toc-text">4.4 get initial signals FORMAL need</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-R-channel-validate"><span class="toc-number">5.</span> <span class="toc-text">5. R channel validate</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-rdaddr-validate"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 rdaddr_validate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-next-rd-addr"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 next_rd_addr</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-R-induction-property"><span class="toc-number">6.</span> <span class="toc-text">6. R induction property</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-rdaddr-valpending"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 rdaddr_valpending</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-WRAP-arlen-check"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 WRAP arlen check</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-Matching-ckarlen-to-cklen"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 Matching ckarlen to cklen</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/01/11/AXI-Master-bursting/" title="difficult of AXI Master Bursting"><img src="/img/chainsaw_makima04.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="difficult of AXI Master Bursting"/></a><div class="content"><a class="title" href="/2024/01/11/AXI-Master-bursting/" title="difficult of AXI Master Bursting">difficult of AXI Master Bursting</a><time datetime="2024-01-11T08:52:33.000Z" title="发表于 2024-01-11 16:52:33">2024-01-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/10/Plan-XJY/" title="Plan_XJY"><img src="/img/chainsaw_power01.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Plan_XJY"/></a><div class="content"><a class="title" href="/2024/01/10/Plan-XJY/" title="Plan_XJY">Plan_XJY</a><time datetime="2024-01-10T07:46:33.000Z" title="发表于 2024-01-10 15:46:33">2024-01-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/07/skid-buffer/" title="skid_buffer"><img src="/img/chainsaw_power01.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="skid_buffer"/></a><div class="content"><a class="title" href="/2024/01/07/skid-buffer/" title="skid_buffer">skid_buffer</a><time datetime="2024-01-07T12:48:03.000Z" title="发表于 2024-01-07 20:48:03">2024-01-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/06/how2blog/" title="how2blog"><img src="/img/reze.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="how2blog"/></a><div class="content"><a class="title" href="/2024/01/06/how2blog/" title="how2blog">how2blog</a><time datetime="2024-01-06T14:34:23.000Z" title="发表于 2024-01-06 22:34:23">2024-01-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/27/S2MM/" title="S2MM"><img src="/img/chainsaw_red.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="S2MM"/></a><div class="content"><a class="title" href="/2023/12/27/S2MM/" title="S2MM">S2MM</a><time datetime="2023-12-27T05:57:36.000Z" title="发表于 2023-12-27 13:57:36">2023-12-27</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 冰蒂斯</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>